<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据库与身份认证 | Hello CWG</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/note/img/left_logo.png">
    <link name="author" content="cwg、蔡蔡、果果">
    <link name="keywords" content="cwg、cwg笔记、蔡蔡笔记、vuePress介绍、vuePress说明、vuePress、前端、学习、">
    <link name="referrer" content="no-referrer">
    <meta name="description" content="cwg的学习笔记、前端、后端、教程、推荐等内容">
    
    <link rel="preload" href="/note/assets/css/0.styles.3d508d24.css" as="style"><link rel="preload" href="/note/assets/js/app.6137f109.js" as="script"><link rel="preload" href="/note/assets/js/2.a83e5f1b.js" as="script"><link rel="preload" href="/note/assets/js/1.e9423e49.js" as="script"><link rel="preload" href="/note/assets/js/30.f5326d79.js" as="script"><link rel="prefetch" href="/note/assets/js/10.a622a579.js"><link rel="prefetch" href="/note/assets/js/11.a36d60ed.js"><link rel="prefetch" href="/note/assets/js/12.62b3ca4d.js"><link rel="prefetch" href="/note/assets/js/13.a4f27cd4.js"><link rel="prefetch" href="/note/assets/js/14.da764baa.js"><link rel="prefetch" href="/note/assets/js/15.9df6c2bc.js"><link rel="prefetch" href="/note/assets/js/16.1b8a0c23.js"><link rel="prefetch" href="/note/assets/js/17.71a8474b.js"><link rel="prefetch" href="/note/assets/js/18.8e376abb.js"><link rel="prefetch" href="/note/assets/js/19.0c849929.js"><link rel="prefetch" href="/note/assets/js/20.1fe549cc.js"><link rel="prefetch" href="/note/assets/js/21.8e037075.js"><link rel="prefetch" href="/note/assets/js/22.24313902.js"><link rel="prefetch" href="/note/assets/js/23.a6325176.js"><link rel="prefetch" href="/note/assets/js/24.fa3a8dc2.js"><link rel="prefetch" href="/note/assets/js/25.77e2de22.js"><link rel="prefetch" href="/note/assets/js/26.03022ddd.js"><link rel="prefetch" href="/note/assets/js/27.40e9bf23.js"><link rel="prefetch" href="/note/assets/js/28.7c393456.js"><link rel="prefetch" href="/note/assets/js/29.df168136.js"><link rel="prefetch" href="/note/assets/js/3.f5963c88.js"><link rel="prefetch" href="/note/assets/js/31.1054db6f.js"><link rel="prefetch" href="/note/assets/js/32.89fabe1d.js"><link rel="prefetch" href="/note/assets/js/33.4bf7be32.js"><link rel="prefetch" href="/note/assets/js/34.61b94b71.js"><link rel="prefetch" href="/note/assets/js/35.6de4dcba.js"><link rel="prefetch" href="/note/assets/js/36.e5ac569c.js"><link rel="prefetch" href="/note/assets/js/37.7c6e9012.js"><link rel="prefetch" href="/note/assets/js/38.fcb24c6b.js"><link rel="prefetch" href="/note/assets/js/39.40e1ec1f.js"><link rel="prefetch" href="/note/assets/js/4.c46f0de5.js"><link rel="prefetch" href="/note/assets/js/40.2e147dc6.js"><link rel="prefetch" href="/note/assets/js/41.e43c471a.js"><link rel="prefetch" href="/note/assets/js/42.cf23579f.js"><link rel="prefetch" href="/note/assets/js/43.48068456.js"><link rel="prefetch" href="/note/assets/js/44.280822ee.js"><link rel="prefetch" href="/note/assets/js/45.285b8e0c.js"><link rel="prefetch" href="/note/assets/js/46.6fb7edc4.js"><link rel="prefetch" href="/note/assets/js/47.bc4cf930.js"><link rel="prefetch" href="/note/assets/js/48.ac4db527.js"><link rel="prefetch" href="/note/assets/js/49.77943968.js"><link rel="prefetch" href="/note/assets/js/5.85a397b4.js"><link rel="prefetch" href="/note/assets/js/50.70b4ece0.js"><link rel="prefetch" href="/note/assets/js/51.7dbcac7d.js"><link rel="prefetch" href="/note/assets/js/52.471b5b0b.js"><link rel="prefetch" href="/note/assets/js/53.aae92902.js"><link rel="prefetch" href="/note/assets/js/54.92f864f4.js"><link rel="prefetch" href="/note/assets/js/55.d7b84799.js"><link rel="prefetch" href="/note/assets/js/56.6d16d691.js"><link rel="prefetch" href="/note/assets/js/57.93ffbbb9.js"><link rel="prefetch" href="/note/assets/js/58.ebcc424a.js"><link rel="prefetch" href="/note/assets/js/59.ae4ff5d2.js"><link rel="prefetch" href="/note/assets/js/6.dd2a06e8.js"><link rel="prefetch" href="/note/assets/js/60.c01565a8.js"><link rel="prefetch" href="/note/assets/js/61.3ca9b9cb.js"><link rel="prefetch" href="/note/assets/js/62.0ffb05bb.js"><link rel="prefetch" href="/note/assets/js/63.001c2023.js"><link rel="prefetch" href="/note/assets/js/64.3fbf77e6.js"><link rel="prefetch" href="/note/assets/js/65.bdba6696.js"><link rel="prefetch" href="/note/assets/js/66.c45c84a5.js"><link rel="prefetch" href="/note/assets/js/67.802a5db5.js"><link rel="prefetch" href="/note/assets/js/68.aaa45967.js"><link rel="prefetch" href="/note/assets/js/7.1c947e57.js"><link rel="prefetch" href="/note/assets/js/vendors~docsearch.19933dad.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.3d508d24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><img src="/note/img/left_logo.png" alt="Hello CWG" class="logo"> <span class="site-name can-hide">Hello CWG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://uniapp.dcloud.net.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uni-app
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://typescript.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://pinia.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pinia
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tailwindcss.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  tailwindcss
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://element-plus.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vkuviewdoc.fsq.pub/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uView 3.0
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微信官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/note/notes/programmer/programmer.html" class="nav-link">
  程序员
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/frontend/html/tag.html" class="nav-link">
  html
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/css/cssName.html" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/js/base/js.html" class="nav-link">
  js
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/ts/base.html" class="nav-link">
  ts
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/frontend/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/react/react.html" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          扩展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/frontend/extend/practical.html" class="nav-link">
  实用功能
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/extend/knowledge.html" class="nav-link">
  知识补充
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><span class="title">后端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端学习" class="mobile-dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          语言
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/backend/nodejs/nodeBasic.html" class="nav-link">
  nodejs
</a></li></ul></li><li class="dropdown-item"><h4>
          扩展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/backend/extend/knowledge.html" class="nav-link">
  知识补充
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他学习" class="dropdown-title"><span class="title">其他学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他学习" class="mobile-dropdown-title"><span class="title">其他学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/notes/other/git/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/other/pm2/pm2.html" class="nav-link">
  pm2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/notes/tutorials/cloudDiskMount.html" class="nav-link">
  云盘挂载
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/tutorials/nvm.html" class="nav-link">
  nvm安装
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="推荐" class="dropdown-title"><span class="title">推荐</span> <span class="arrow down"></span></button> <button type="button" aria-label="推荐" class="mobile-dropdown-title"><span class="title">推荐</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/notes/recommend/apply/computer.html" class="nav-link">
  应用
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/recommend/plugin/vscode.html" class="nav-link">
  插件
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/recommend/other/tool.html" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/recommend/other/resource.html" class="nav-link">
  资源
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><span class="title">面试</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试" class="mobile-dropdown-title"><span class="title">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端面试
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/interview/webHtmlCss/web.html" class="nav-link">
  web基础+html+css
</a></li><li class="dropdown-subitem"><a href="/note/notes/interview/js/base.html" class="nav-link">
  js
</a></li><li class="dropdown-subitem"><a href="/note/notes/interview/vue/base.html" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/note/notes/interview/weChatApp/base.html" class="nav-link">
  微信小程序
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://uniapp.dcloud.net.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uni-app
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://typescript.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://pinia.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pinia
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tailwindcss.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  tailwindcss
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://element-plus.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vkuviewdoc.fsq.pub/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uView 3.0
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微信官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/note/notes/programmer/programmer.html" class="nav-link">
  程序员
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/frontend/html/tag.html" class="nav-link">
  html
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/css/cssName.html" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/js/base/js.html" class="nav-link">
  js
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/ts/base.html" class="nav-link">
  ts
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/frontend/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/react/react.html" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          扩展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/frontend/extend/practical.html" class="nav-link">
  实用功能
</a></li><li class="dropdown-subitem"><a href="/note/notes/frontend/extend/knowledge.html" class="nav-link">
  知识补充
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><span class="title">后端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端学习" class="mobile-dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          语言
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/backend/nodejs/nodeBasic.html" class="nav-link">
  nodejs
</a></li></ul></li><li class="dropdown-item"><h4>
          扩展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/backend/extend/knowledge.html" class="nav-link">
  知识补充
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他学习" class="dropdown-title"><span class="title">其他学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他学习" class="mobile-dropdown-title"><span class="title">其他学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/notes/other/git/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/other/pm2/pm2.html" class="nav-link">
  pm2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/notes/tutorials/cloudDiskMount.html" class="nav-link">
  云盘挂载
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/tutorials/nvm.html" class="nav-link">
  nvm安装
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="推荐" class="dropdown-title"><span class="title">推荐</span> <span class="arrow down"></span></button> <button type="button" aria-label="推荐" class="mobile-dropdown-title"><span class="title">推荐</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/notes/recommend/apply/computer.html" class="nav-link">
  应用
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/recommend/plugin/vscode.html" class="nav-link">
  插件
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/recommend/other/tool.html" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/note/notes/recommend/other/resource.html" class="nav-link">
  资源
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><span class="title">面试</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试" class="mobile-dropdown-title"><span class="title">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端面试
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/notes/interview/webHtmlCss/web.html" class="nav-link">
  web基础+html+css
</a></li><li class="dropdown-subitem"><a href="/note/notes/interview/js/base.html" class="nav-link">
  js
</a></li><li class="dropdown-subitem"><a href="/note/notes/interview/vue/base.html" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/note/notes/interview/weChatApp/base.html" class="nav-link">
  微信小程序
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note/notes/backend/nodejs/nodeBasic.html" class="sidebar-link">node基础</a></li><li><a href="/note/notes/backend/nodejs/builtModule.html" class="sidebar-link">内置模块</a></li><li><a href="/note/notes/backend/nodejs/modularization.html" class="sidebar-link">模块化</a></li><li><a href="/note/notes/backend/nodejs/npmAndPackage.html" class="sidebar-link">npm与包</a></li><li><a href="/note/notes/backend/nodejs/express.html" class="sidebar-link">Express</a></li><li><a href="/note/notes/backend/nodejs/sqlAndIdentity.html" aria-current="page" class="active sidebar-link">数据库与身份认证</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#数据库的基本概念" class="sidebar-link">数据库的基本概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#什么是数据库" class="sidebar-link">什么是数据库</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#常见数据库及分类" class="sidebar-link">常见数据库及分类</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#创痛型数据库的数据组织结构" class="sidebar-link">创痛型数据库的数据组织结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#安装并配置mysql" class="sidebar-link">安装并配置MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#了解需要安装哪些-mysql相关的软件" class="sidebar-link">了解需要安装哪些,MySQL相关的软件</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#mysql-在-mac-环境下的安装" class="sidebar-link">MySQL 在 Mac 环境下的安装</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#mysql-在-windows-环境下的安装" class="sidebar-link">MySQL 在 Windows 环境下的安装</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#mysql-的基本使用" class="sidebar-link">MySQL 的基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#使用mysql-workbench管理数据库" class="sidebar-link">使用MySQL Workbench管理数据库</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#使用-sql-管理数据库" class="sidebar-link">使用 SQL 管理数据库</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-的-select-语句" class="sidebar-link">SQL 的 SELECT 语句</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-的-insert-info" class="sidebar-link">SQL 的 INSERT INFO</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-的-update-语句" class="sidebar-link">SQL 的 UPDATE 语句</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-的-detail-语句" class="sidebar-link">SQL 的 DETAIL 语句</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-中的-where-子句" class="sidebar-link">SQL 中的 WHERE 子句</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-中的-and-和-or-运算符" class="sidebar-link">SQL 中的 AND 和 OR 运算符</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-中的-order-by-子句" class="sidebar-link">SQL 中的 ORDER BY 子句</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#sql-的-count-函数" class="sidebar-link">SQL 的 COUNT(*) 函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#在项目中使用-mysql" class="sidebar-link">在项目中使用 MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#在项目中使用mysql的步骤" class="sidebar-link">在项目中使用mysql的步骤</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#安装与配置mysql模块" class="sidebar-link">安装与配置mysql模块</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#使用mysql操作mysql数据库" class="sidebar-link">使用mysql操作MySql数据库</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#前后端的身份认证" class="sidebar-link">前后端的身份认证</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#web-开发模式" class="sidebar-link">Web 开发模式</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#身份认证" class="sidebar-link">身份认证</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#session-认证机制" class="sidebar-link">Session 认证机制</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#在-express-中使用-session-认证" class="sidebar-link">在 Express 中使用 Session 认证</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#jwt-认证机制" class="sidebar-link">JWT 认证机制</a></li><li class="sidebar-sub-header"><a href="/note/notes/backend/nodejs/sqlAndIdentity.html#在express-中使用-jwt" class="sidebar-link">在Express 中使用 JWT</a></li></ul></li></ul></li><li><a href="/note/notes/backend/nodejs/buildProject.html" class="sidebar-link">项目搭建</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="数据库与身份认证"><a href="#数据库与身份认证" class="header-anchor">#</a> 数据库与身份认证</h1> <h2 id="数据库的基本概念"><a href="#数据库的基本概念" class="header-anchor">#</a> 数据库的基本概念</h2> <h3 id="什么是数据库"><a href="#什么是数据库" class="header-anchor">#</a> 什么是数据库</h3> <blockquote><p>数据库(database)是用来组织、存储和管理数据的仓库。
当今世界是一个充满着数据的互联网世界，充斥看着大量的数据。数据的来源有很多，比如出行记录、消费记录浏览的网页、发送的消息等等。除了文本类型的数据，图像、音乐、声音都是数据。
为了方便管理互联网世界中的数据，就有了数据库管理系统的概念（简称：数据库）。用户可以对数据库中的数据进行新增、查询、更新、删除等操作。</p></blockquote> <h3 id="常见数据库及分类"><a href="#常见数据库及分类" class="header-anchor">#</a> 常见数据库及分类</h3> <blockquote><ul><li><code>MySQL</code>数据库（目前使用最广泛、流行度最高的开源免费数据库；<code>Community+Enterprise</code>)</li> <li><code>Oracle</code>数据库（收费）</li> <li><code>SQL Serve</code>r数据库（收费）</li> <li><code>Mongodb</code>数据库(<code>Community+Enterprise</code>)</li></ul></blockquote> <p>其中，<code>MySQL</code>、<code>Oracle</code>、<code>SQL Server</code>属于传统型数据库（又叫做：关系型数据库或<code>SQL</code>数据库），这三者的设计理念相同，用法比较类似。</p> <blockquote><p>而<code>Mongodb</code>属于新型数据库（又叫做：非关系型数据库或<code>NoSQL</code>数据库），它在一定程度上弥补了传统型数据库的缺陷。</p></blockquote> <h3 id="创痛型数据库的数据组织结构"><a href="#创痛型数据库的数据组织结构" class="header-anchor">#</a> 创痛型数据库的数据组织结构</h3> <blockquote><p>数据的组织结构：指的就是数据以什么样的结构进行存储。</p></blockquote> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1667906117797-8ce21ec5-ba9c-4b96-95c6-f8f7d694c141.png#averageHue=%2383735f&amp;clientId=u963b2522-1215-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=304&amp;id=LeDQT&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=418&amp;originWidth=512&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=337680&amp;status=done&amp;style=none&amp;taskId=u22c08738-7b0f-48be-ab52-2afbd8643c0&amp;title=&amp;width=372.3636363636364" referrerpolicy="no-referrer">
&gt; 传统型数据库的数据组织结构，与`Excel`中数据的组织结构比较类似。
&gt; 因此，我们可以对比着`Excel`来了解和学习传统型数据库的数据组织结构。
<blockquote><p>数据的组织结构分为数据库(<code>database</code>)、数据表(<code>table</code>)、数据行(<code>row</code>)、字段(<code>field</code>)这4大部分组成。</p></blockquote> <h4 id="实际开发库、表、行、字段的关系"><a href="#实际开发库、表、行、字段的关系" class="header-anchor">#</a> 实际开发库、表、行、字段的关系</h4> <blockquote><ul><li>① 在实际项目开发中，一般情况下，每个项目都对应独立的数据库。</li> <li>② 不同的数据，要存储到数据库的不同表中，例如：用户数据存储到<code>users</code>表中，图书数据存储到<code>books</code>表中。</li> <li>③ 每个表中具体存储哪些信息，由字段来决定，例如：我们可以为<code>users</code>，表设计<code>id</code>、<code>username</code>、<code>password</code>这3个字段。</li> <li>④ 表中的行，代表每一条具体的数据</li></ul></blockquote> <h2 id="安装并配置mysql"><a href="#安装并配置mysql" class="header-anchor">#</a> 安装并配置<code>MySQL</code></h2> <h3 id="了解需要安装哪些-mysql相关的软件"><a href="#了解需要安装哪些-mysql相关的软件" class="header-anchor">#</a> 了解需要安装哪些,MySQL相关的软件</h3> <blockquote><p>对于开发人员来说，只需要安装<code>MySQL Server</code>和<code>MySQL Workbench</code>这两个软件，就能满足开发的需要了.</p> <ul><li><code>MySQL Server</code>: 专门用来提供数据存储和服务的软件。</li> <li><code>MySQL Workbench</code>: 可视化的<code>MySQL</code>管理工具，通过它，可以方便的操作存储在<code>MySQL Server</code>中的数据。</li></ul></blockquote> <h3 id="mysql-在-mac-环境下的安装"><a href="#mysql-在-mac-环境下的安装" class="header-anchor">#</a> <code>MySQL</code> 在 Mac 环境下的安装</h3> <blockquote><p>在Mac环境下安装MySQL的过程比Windows环境下的步骤简单很多：</p> <ul><li>① 先运行<code>mysq-8.0.19-macos10.15-x8664.dmg</code>这个安装包，将<code>MySQL Server</code>安装到Mac系统</li> <li>② 再运行<code>mysql-workbench-community-8.0.19-macos-x8664.dmg</code>这个安装包，将可视化的<code>MySQLWorkbench</code>工具安装到Mac系统</li></ul></blockquote> <h3 id="mysql-在-windows-环境下的安装"><a href="#mysql-在-windows-环境下的安装" class="header-anchor">#</a> <code>MySQL</code> 在 <code>Windows</code> 环境下的安装</h3> <p>在官网上自己搜索下载</p> <h2 id="mysql-的基本使用"><a href="#mysql-的基本使用" class="header-anchor">#</a> <code>MySQL</code> 的基本使用</h2> <h3 id="使用mysql-workbench管理数据库"><a href="#使用mysql-workbench管理数据库" class="header-anchor">#</a> 使用<code>MySQL Workbench</code>管理数据库</h3> <h4 id="_1、创建数据库"><a href="#_1、创建数据库" class="header-anchor">#</a> 1、创建数据库</h4> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1667993967843-1603b9be-193b-4dd7-93e9-6927f9d12d98.png#averageHue=%23f7fbf8&amp;clientId=u2ecfedc6-8d84-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=351&amp;id=ucf1b8fea&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=483&amp;originWidth=852&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=194642&amp;status=done&amp;style=none&amp;taskId=uf28c1818-f638-4b51-bb32-89f152f3a0a&amp;title=&amp;width=619.6363636363636" referrerpolicy="no-referrer"> <h4 id="_2、创建数据表"><a href="#_2、创建数据表" class="header-anchor">#</a> 2、创建数据表</h4> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1667995218051-80899a61-a754-4c18-ad75-2460d83e294b.png#averageHue=%23f3f6f3&amp;clientId=u2ecfedc6-8d84-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=309&amp;id=u7431a64b&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=425&amp;originWidth=1053&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=280151&amp;status=done&amp;style=none&amp;taskId=u7d8f3ec0-27fb-4d08-99ed-42ed8da6e77&amp;title=&amp;width=765.8181818181819" referrerpolicy="no-referrer"> <h4 id="_3、向表中写入数据"><a href="#_3、向表中写入数据" class="header-anchor">#</a> 3、向表中写入数据</h4> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1667995532141-a34a195e-607c-46b8-b490-a65b53d90271.png#averageHue=%23f5f8f6&amp;clientId=u2ecfedc6-8d84-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=312&amp;id=ubde6d57d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=429&amp;originWidth=743&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=203227&amp;status=done&amp;style=none&amp;taskId=uc3d686c8-6aca-405f-b3de-100518ef8f0&amp;title=&amp;width=540.3636363636364" referrerpolicy="no-referrer"> <h3 id="使用-sql-管理数据库"><a href="#使用-sql-管理数据库" class="header-anchor">#</a> 使用 SQL 管理数据库</h3> <h4 id="_1、什么是sql"><a href="#_1、什么是sql" class="header-anchor">#</a> 1、什么是SQL</h4> <blockquote><p><code>SQL</code>(英文全称：Structured Query Language)是结构化查询语言，专门用来访问和处理数据库的编程语言。能够让我们以编程的形式，操作数据库里面的数据。
三个关键点：</p> <ul><li>① <code>SQL</code>是一门数据库编程语言</li> <li>② 使用<code>SQL</code>语言编写出来的代码，叫做<code>SQL</code>语句</li> <li>③ <code>SQL</code>语言只能在关系型数据库中使用（例如<code>MySQL</code>、<code>Oracle</code>、<code>SQL Server</code>)。非关系型数据库（例如<code>Mongodb</code>)不支持<code>SQL</code>语言</li></ul></blockquote> <h4 id="_2、sql能做什么"><a href="#_2、sql能做什么" class="header-anchor">#</a> 2、<code>SQL</code>能做什么</h4> <blockquote><ol><li>从数据库中查询数据</li> <li>向数据库中插入新的数据</li> <li>更新数据库中的数据</li> <li>从数据库删除数据</li> <li>可以创建新数据库</li> <li>可在数据库中创建新表</li> <li>可在数据库中创建存储过程、视图</li> <li>etc.…</li></ol></blockquote> <p><strong>需要学习的</strong></p> <blockquote><p>重点掌握如何使用SQL从数据表中：
查询数据(<code>select</code>)、插入数据(<code>insert into</code>)、更新数据(<code>update</code>)、删除数据(<code>delete</code>)
颜外需要掌握的4种SQL语法：
<code>where</code>条件、<code>and</code>和<code>or</code>运算符、<code>order by</code>排序、<code>count(*)</code>函数</p></blockquote> <h3 id="sql-的-select-语句"><a href="#sql-的-select-语句" class="header-anchor">#</a> <code>SQL</code> 的 <code>SELECT</code> 语句</h3> <blockquote><p>SELECT语句用于从表中查询数据。执行的结果被存储在一个结果表中（称为结果集）。语法格式
如下：</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">--从FROM指定的【表中】，查询出【所有的】数据.*表示【所有列】</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名称

<span class="token comment">--从FROM指定的【表中】，查询出指定列名称（字段）的数据</span>
<span class="token keyword">SELECT</span> 列名称 <span class="token keyword">FROM</span> 表名称
<span class="token comment">--多个列之间用逗号隔开</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> username <span class="token keyword">FROM</span> users
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>注意：<code>SQL</code>语句中的关键字对大小写不敏感。<code>SELECT</code>等效于<code>select</code>,<code>FROM</code>等效于<code>from</code>。</p></blockquote> <h3 id="sql-的-insert-info"><a href="#sql-的-insert-info" class="header-anchor">#</a> <code>SQL</code> 的 <code>INSERT INFO</code></h3> <blockquote><p><code>INSERT INTO</code>语句用于向数据表中插入新的数据行，语法格式如下：</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法解读：向指症的表中，插入如下几列数据，列的值通过va1ues一指定</span>
<span class="token comment">-- 注意：列和值要一对应，多个列和多个值之间，使用英文的逗号分隔</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> ···<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="sql-的-update-语句"><a href="#sql-的-update-语句" class="header-anchor">#</a> <code>SQL</code> 的 <code>UPDATE</code> 语句</h3> <blockquote><p>Update语句用于修改表中的数据。语法格式如下：</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--1,用UPDATE指定要更新鄂个表中的数据</span>
<span class="token comment">--2.用SET指定列对应的新值</span>
<span class="token comment">--3.用WHERE指定更新的条件</span>
<span class="token keyword">UPDATE</span> 表称 <span class="token keyword">SET</span> 列名称 <span class="token operator">=</span> 新值 <span class="token keyword">WHERE</span> 列名称<span class="token operator">=</span>某值
<span class="token comment">-- 更新多列</span>
<span class="token keyword">UPDATE</span> 表称 <span class="token keyword">SET</span> 列名称 <span class="token operator">=</span> 新值<span class="token punctuation">,</span> 列名称<span class="token number">1</span> <span class="token operator">=</span> 新值 <span class="token keyword">WHERE</span> 列名称<span class="token operator">=</span>某值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="sql-的-detail-语句"><a href="#sql-的-detail-语句" class="header-anchor">#</a> <code>SQL</code> 的 <code>DETAIL</code> 语句</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 注意：对初学者来说，经常忘记提供WHERE条件，</span>
<span class="token comment">-- 从而导致误到整张表的数据！一定要慎重！</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="sql-中的-where-子句"><a href="#sql-中的-where-子句" class="header-anchor">#</a> <code>SQL</code> 中的 <code>WHERE</code> 子句</h3> <blockquote><p><code>WHERE</code>子句用于限定选择的标准。在<code>SELECT</code>、<code>UPDATE</code>、<code>DELETE</code>语句中，皆可使用<code>WHERE</code>子句来限定选择的标准。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询语句中的WHERE条件</span>
<span class="token keyword">SELECT</span> 列名称 <span class="token keyword">FROM</span> 表名称 <span class="token keyword">WHERE</span> 列运算符值
<span class="token comment">-- 更新语句中的WHERE条件</span>
<span class="token keyword">UPDATE</span> 表名称 <span class="token keyword">SET</span> 列<span class="token operator">=</span>新值 <span class="token keyword">WHERE</span> 列运算符值
<span class="token comment">-- 别除语句中的HERE条件</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> 表名称 <span class="token keyword">WHERE</span> 列运算符值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>可以在 where 子句中使用的运算符</strong></p> <table><thead><tr><th>操作符</th> <th>描述</th></tr></thead> <tbody><tr><td><code>=</code></td> <td>等于</td></tr> <tr><td><code>&lt;&gt;</code></td> <td>不等于</td></tr> <tr><td><code>&gt;</code></td> <td>大于</td></tr> <tr><td><code>&lt;</code></td> <td>小于</td></tr> <tr><td><code>&gt;=</code></td> <td>大于等于</td></tr> <tr><td><code>&lt;=</code></td> <td>小于等于</td></tr> <tr><td><code>BETWEEN</code></td> <td>在某个范围内</td></tr> <tr><td><code>LIKE</code></td> <td>搜索某种模式</td></tr></tbody></table> <blockquote><p>注意：在某些版本的<code>SQL</code>中，操作符<code>&lt;&gt;</code>可以写为<code>!=</code></p></blockquote> <h3 id="sql-中的-and-和-or-运算符"><a href="#sql-中的-and-和-or-运算符" class="header-anchor">#</a> <code>SQL</code> 中的 <code>AND</code> 和 <code>OR</code> 运算符</h3> <blockquote><p><code>AND</code>和<code>OR</code>可在<code>WHERE</code>子语句中把两个或多个条件结合起来。
<code>AND</code>表示必须同时满足多个条件，相当于<code>JavaScript</code>中的<code>&amp;&amp;</code>运算符，例如<code>if(a!==10&amp;&amp;a!==20)</code> <code>OR</code>表示只要满足任意一个条件即可，相当于<code>JavaScript</code>中的‖运算符，例如<code>if(a!==10‖a!==20)</code></p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 获取status=0且id=2的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">and</span> id<span class="token operator">=</span><span class="token number">2</span>
<span class="token comment">-- </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">or</span> id<span class="token operator">=</span><span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="sql-中的-order-by-子句"><a href="#sql-中的-order-by-子句" class="header-anchor">#</a> <code>SQL</code> 中的 <code>ORDER BY</code> 子句</h3> <blockquote><p><code>ORDER BY</code>语句用于根据指定的列对结果集进行排序。</p> <p><code>ORDER BY</code>语句默队按照升序对记录进行排序。</p> <p>如果您希望按照降序对记录进行排序，可以使用<code>DESC</code>关键字。</p></blockquote> <h4 id="order-by-升序排序"><a href="#order-by-升序排序" class="header-anchor">#</a> <code>ORDER BY</code> - 升序排序</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 对users表中的数据，按照status字段进行升序排序，示例如下：</span>
<span class="token comment">-- 因为ORDER BY默认进行升序排序：</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">status</span>
<span class="token comment">-- 其中，SC关键字代表升序排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">status</span> <span class="token keyword">asc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="order-by-降序排列"><a href="#order-by-降序排列" class="header-anchor">#</a> <code>ORDER BY</code> - 降序排列</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 对users表中的数据，按照id字段进行降序排序，示例如下：</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">desc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="order-by-多重排序"><a href="#order-by-多重排序" class="header-anchor">#</a> <code>ORDER BY</code> - 多重排序</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 对users表中的数据，先按照status字段进行降序排序，</span>
<span class="token comment">-- 再按照username的字母顺序，进行升序排序，示例如下：</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">status</span> <span class="token keyword">desc</span><span class="token punctuation">,</span> username <span class="token keyword">asc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="sql-的-count-函数"><a href="#sql-的-count-函数" class="header-anchor">#</a> <code>SQL</code> 的 <code>COUNT(*)</code> 函数</h3> <blockquote><p><code>COUNT(*)</code>函数用于返回查询结果的总数据条数，语法格式如下：</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> 表名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="count-示例"><a href="#count-示例" class="header-anchor">#</a> <code>count(*)</code> 示例</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询users表中status为0的总数据条数：</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="使用-as-设置别名"><a href="#使用-as-设置别名" class="header-anchor">#</a> 使用 <code>AS</code> 设置别名</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 新列表 <span class="token keyword">from</span> users <span class="token keyword">where</span> <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment">-- 示例</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> total <span class="token keyword">from</span> users <span class="token keyword">where</span> <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">select</span> username <span class="token keyword">as</span> un<span class="token punctuation">,</span> password <span class="token keyword">as</span> pw <span class="token keyword">from</span> users
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="在项目中使用-mysql"><a href="#在项目中使用-mysql" class="header-anchor">#</a> 在项目中使用 <code>MySQL</code></h2> <h3 id="在项目中使用mysql的步骤"><a href="#在项目中使用mysql的步骤" class="header-anchor">#</a> 在项目中使用<code>mysql</code>的步骤</h3> <blockquote><ol><li>安装操作<code>MySQL</code>数据库的第三方模块(<code>mysql</code>)</li> <li>通过<code>mysql</code>模块连接到<code>MySQL</code>数据库</li> <li>通过<code>mysql</code>模块执行<code>SQL</code>语句</li></ol></blockquote> <h3 id="安装与配置mysql模块"><a href="#安装与配置mysql模块" class="header-anchor">#</a> 安装与配置<code>mysql</code>模块</h3> <h4 id="_1、安装-mysql-模块"><a href="#_1、安装-mysql-模块" class="header-anchor">#</a> 1、安装 <code>mysql</code> 模块</h4> <blockquote><p><code>mysql</code>模块是托管于<code>npm</code>上的第三方模块。它提供了在<code>Node.js</code>项目中连接和操作<code>MySQL</code>数据库的能力。想要在项目中使用它，需要先运行如下命令，将ysql安装为项目的依赖包：</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>npm i mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2、配置-mysql-模块"><a href="#_2、配置-mysql-模块" class="header-anchor">#</a> 2、配置 <code>mysql</code> 模块</h4> <blockquote><p>在使用<code>mysql</code>模块操作<code>MySQL</code>数据库之前，必须先对<code>mysql</code>模块进行必要的配置，主要的配置步骤如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1.导入mysq1模块</span>
<span class="token keyword">const</span> mysql <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span>
<span class="token comment">// 2.建立与山y5QL数据库的连接</span>
<span class="token keyword">const</span> db <span class="token operator">=</span>  mysql<span class="token punctuation">.</span><span class="token function">createPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>  <span class="token comment">//数据库的IP地址</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>  <span class="token comment">//登录数据库的账号</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'admin123'</span><span class="token punctuation">,</span> <span class="token comment">//登录数据库的密码</span>
  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'my_db_01'</span> <span class="token comment">//指定要操作哪个数据库</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_3、测试-mysql-模块是否正常工作"><a href="#_3、测试-mysql-模块是否正常工作" class="header-anchor">#</a> 3、测试 mysql 模块是否正常工作</h4> <blockquote><p>调用<code>db.query()</code>函数，指定要执行的<code>SQL</code>语句，通过回调函数拿到执行的结果：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 检测mysq1模块的香正常工作</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'SELECT 1'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
	<span class="token comment">//只要能打印出 [ RowDataPacket {'1':1} ] 的结果，就证明数据库连接正常</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="使用mysql操作mysql数据库"><a href="#使用mysql操作mysql数据库" class="header-anchor">#</a> 使用<code>mysql</code>操作<code>MySql</code>数据库</h3> <h4 id="_1、查询数据"><a href="#_1、查询数据" class="header-anchor">#</a> 1、查询数据</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查询users表中的所有数据</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'select * from users'</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'搜索失败 =&gt; '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token comment">// 注意：如果执行的是select查询语句，则执行的结果是数组</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'搜索成功 =&gt; '</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2、插入数据"><a href="#_2、插入数据" class="header-anchor">#</a> 2、插入数据</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 向users表中新增数据，其中username为 哈哈哈,password为hhhhhh。示例代码如下：</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'哈哈哈'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'hhhhhh'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'insert into users (username, password) values (?, ?)'</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">.</span>username<span class="token punctuation">,</span> user<span class="token punctuation">.</span>password<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'搜索失败 =&gt; '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token comment">// 注意：如果执行的是insert into插入语句，则results是一个对象</span>
  <span class="token comment">// 可以通过affectedRows属性，来判断是否插入数据成功</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插入成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>插入数据的便捷方式</strong></p> <blockquote><p>向表中新增数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速插入数据：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 插入数据的便捷方式，示例代码如下：</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'嘿嘿嘿'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'h1h1h1'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'insert into users set ?'</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> user<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'搜索失败 =&gt; '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token comment">// 注意：如果执行的是insert into插入语句，则results是一个对象</span>
  <span class="token comment">// 可以通过affectedRows属性，来判断是否插入数据成功</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插入成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_3、更新数据"><a href="#_3、更新数据" class="header-anchor">#</a> 3、更新数据</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 更新数据</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'z1z1z1'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'update users set username=?, password=? where id=?'</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">.</span>username<span class="token punctuation">,</span> user<span class="token punctuation">.</span>password<span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新失败 =&gt; '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token comment">// 注意：执行了update语句之后，执行的结果，也是一个对象，可以通过affectedRows判断是否更新成功</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>更新数据的便捷方式</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 更新数据便捷方式</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'l1l1l1'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'update users set ? where id=?'</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新失败 =&gt; '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_4、删除数据"><a href="#_4、删除数据" class="header-anchor">#</a> 4、删除数据</h4> <blockquote><p>在删除数据时，推荐根据d这样的唯一标识，来删除对应的数据。示例如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 删除数据</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'delete from users where id=?'</span>
<span class="token comment">// 注意：如果SQL语句中有多个占位符，则必须使用数组为每个占位符指定具体的值</span>
<span class="token comment">//       如果SQL语句中只有一个占位符，则可以省略数组</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除失败 =&gt; '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5、标记删除"><a href="#_5、标记删除" class="header-anchor">#</a> 5、标记删除</h4> <blockquote><p>使用<code>DELETE</code>语句，会把真正的把数据从表中别除掉。为了保险起见，推荐使用标记删除的形式，来模拟删除的动作。
所谓的标记删除，就是在表中设置类似于<code>status</code>这样的状态字段，来标记当前这条数据是否被删除。
当用户执行了删除的动作时，我们并没有执行<code>DELETE</code>语句把数据删除掉，而是执行了<code>UPDATE</code>语句，将这条数据对应的<code>status</code>字段标记为删除即可。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//须记除：使用UPDATE语句普代DELETE语句：只更新数的状态，并没有真正除</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">'update users set status=1 where id=?'</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>results</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>affectedRows<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除数据城功！'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">//成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="前后端的身份认证"><a href="#前后端的身份认证" class="header-anchor">#</a> 前后端的身份认证</h2> <h3 id="web-开发模式"><a href="#web-开发模式" class="header-anchor">#</a> Web 开发模式</h3> <blockquote><p>目前主流的Web开发模式有两种，分别是：</p> <ul><li>① 基于服务端渲染的传统<code>Web</code>开发模式</li> <li>② 基于前后端分离的新型<code>Web</code>开发模式</li></ul></blockquote> <h4 id="_1、服务器端渲染的web开发模式"><a href="#_1、服务器端渲染的web开发模式" class="header-anchor">#</a> 1、服务器端渲染的Web开发模式</h4> <blockquote><p>服务端渲染的概念：服务器发送给客户端的HTML页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要使用Ajx这样的技术额外请求页面的数据。</p></blockquote> <p><strong>优点：</strong></p> <blockquote><ul><li>①前端耗时少。因为服务器端负责动态生成<code>HTML</code>内容，浏览器只需要直接渲染页面即可。尤其是移动端更省电。</li> <li>②有利于<code>SEO</code>。因为服务器端响应的是完整的<code>HTML</code>页面内容，所以爬虫更容易爬取获得信息，更有利<code>SEO</code>。</li></ul></blockquote> <p><strong>缺点：</strong></p> <blockquote><ul><li>① 占用服务器端资源。即服务器端完成<code>HTML</code>页面内容的拼接，如果请求较多，会对服务器造成一定的访问压力。</li> <li>② 不利于前后端分离，开发效率低。使用服务器端渲染，则无法进行分工合作，尤其对于前端复杂度高的项目，不利于项目高效开发。</li></ul></blockquote> <h4 id="_2、前后端分离的web开发模式"><a href="#_2、前后端分离的web开发模式" class="header-anchor">#</a> 2、前后端分离的web开发模式</h4> <blockquote><p>前后端分离的概念：前后端分离的开发模式，依赖于<code>Ajax</code>技术的广泛应用。简而言之，前后端分离的<code>Web</code>开发模式，就是后端只负责提供<code>API</code>接口，前端使用<code>Ajax</code>调用接口的开发模式。</p></blockquote> <p><strong>优点：</strong></p> <blockquote><ul><li>① 开发体验好。前端专注于<code>UI</code>页面的开发，后端专注于<code>api</code>的开发，且前端有更多的选择性。</li> <li>② 用户体验好。<code>Ajax</code>技术的广泛应用，极大的提高了用户的体验，可以轻松实现页面的局部刷新。</li> <li>③ 减轻了服务器端的渲染压力。因为页面最终是在每个用户的浏览器中生成的。</li></ul></blockquote> <p><strong>缺点：</strong></p> <blockquote><ul><li>①不利于<code>SEO</code>。因为完整的<code>HTML</code>页面需要在客户端动态拼接完成，所以爬虫对无法爬取页面的有效信息。（解决方案：利用<code>Vue</code>、<code>React</code>等前端框架的<code>SSR</code>(server side render))技术能够很好的解决<code>SEO</code>问题！)</li></ul></blockquote> <h4 id="_3、如何选择web开发模式"><a href="#_3、如何选择web开发模式" class="header-anchor">#</a> 3、如何选择web开发模式</h4> <blockquote><ul><li>比如企业级网站，主要功能是展示而没有复杂的交互，并且需要良好的<code>SEO</code>,则这时我们就需要使用服务器端渲染；</li> <li>而类似后台管理项目，交互性比较强，不需要考虑<code>SEO</code>,那么就可以使用前后端分离的开发模式。
另外，具体使用何种开发模式并不是绝对的，为了同时兼顾了首页的渲染速度和前后端分离的开发效率，一些网站采用了首屏服务器端渲染+其他页面前后端分离的开发模式。</li></ul></blockquote> <h3 id="身份认证"><a href="#身份认证" class="header-anchor">#</a> 身份认证</h3> <h4 id="_1、什么是身份认证"><a href="#_1、什么是身份认证" class="header-anchor">#</a> 1、什么是身份认证</h4> <blockquote><p>身份认证(Authentication)又称“身份验证”、“鉴权”，是指通过一定的手段，完成对用户身份的确认。</p> <ul><li><p>日常生活中的身份认证随处可见，例如：高铁的验票乘车，手机的密码或指纹解锁，支付宝或微信的支付密码等。</p></li> <li><p>在Wb开发中，也涉及到用户身份的认证，例如：各大网站的手机验证码登录、邮箱密码登录、二维码登录等。</p></li></ul></blockquote> <h4 id="_2、不同开发模式下的身份认证"><a href="#_2、不同开发模式下的身份认证" class="header-anchor">#</a> 2、不同开发模式下的身份认证</h4> <blockquote><p>对于服务端谊染和前后端分离这两种开发模式来说，分别有看不同的身份认证方案：</p> <ul><li>① 服务端渲染推荐使用<code>Session</code>认证机制</li> <li>② 前后端分离推荐使用<code>JWT</code>认证机制</li></ul></blockquote> <h3 id="session-认证机制"><a href="#session-认证机制" class="header-anchor">#</a> <code>Session</code> 认证机制</h3> <h4 id="_1、http-协议的无状态性"><a href="#_1、http-协议的无状态性" class="header-anchor">#</a> 1、HTTP 协议的无状态性</h4> <blockquote><p>了解<code>HTTP</code>协议的无状态性是进一步学习<code>Session</code>认证机制的必要前提。</p> <p><code>HTTP</code>协议的无状态性，指的是客户端的每次<code>HTTP</code>请求都是独立的，连续多个请求之间没有直接的关系，服务器不会主动保留每次<code>HTTP</code>请求的状态。</p> <p>如何突破<code>HTTP</code>无状态的限制</p> <p>在Web开发中的专业术语叫做<code>Cookie</code>。</p></blockquote> <h4 id="_2、什么是cookie"><a href="#_2、什么是cookie" class="header-anchor">#</a> 2、什么是Cookie</h4> <blockquote><p><code>Cookie</code>是存储在用户浏览器中的一段不超过<code>4KB</code>的字符串。它由一个名称(<code>Name</code>)、一个值(<code>Value</code>)和其它几个用于控制<code>Cookie</code>有效期、安全性、使用范国的可选属性组成。</p> <p>不同域名下的<code>Cookie</code>各自独立，每当客户端发起请求时，会自动把当前域名下所有未过期的<code>Cookie</code>一同发送到服务器。</p></blockquote> <p>Cookie的计大特性：</p> <blockquote><ul><li>① 自动发送</li> <li>② 域名独立</li> <li>③ 过期限制</li> <li>④ 4k限制</li></ul></blockquote> <h4 id="_3、cookie在身份认证中的作用"><a href="#_3、cookie在身份认证中的作用" class="header-anchor">#</a> 3、Cookie在身份认证中的作用</h4> <blockquote><p>客户端第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的<code>Cookie</code>,客户端会自动将<code>Cookie</code>保存在浏览器中。</p> <p>随后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证相关的<code>Cookie</code>,通过请求头的形式发送给服务器，服务器即可验明客户端的身份。</p></blockquote> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1668330715994-a2fc9767-705b-457d-9c41-4147dd563ab3.png#averageHue=%23d1dbcc&amp;clientId=u2ecfedc6-8d84-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=200&amp;id=uafeb7980&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=275&amp;originWidth=1104&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=140676&amp;status=done&amp;style=none&amp;taskId=uc63f0f84-789d-4bc5-8cf3-1f28ee63431&amp;title=&amp;width=802.9090909090909" referrerpolicy="no-referrer"> <h4 id="_4、cookie-不具有安全性"><a href="#_4、cookie-不具有安全性" class="header-anchor">#</a> 4、Cookie 不具有安全性</h4> <blockquote><p>由于<code>Cookie</code>是存储在浏览器中的，而且浏览器也提供了读写<code>Cookie</code>的<code>API</code>叫，因此<code>Cookie</code>很容易被伪造，不具有安全性。因此不建议服务器将重要的隐私数据，通过<code>Cookie</code>的形式发送给浏览器。
注意：干万不要使用<code>Cookie</code>存储重要且隐私的数据！比如用户的身份信息、密码等。</p></blockquote> <h4 id="_5、提高身份认证的安全性"><a href="#_5、提高身份认证的安全性" class="header-anchor">#</a> 5、提高身份认证的安全性</h4> <blockquote><p>为了防止客户伪造会员卡，收银员在拿到客户出示的会员卡之后，可以在收银机上进行刷卡认证。只有收银机确认存在的会员卡，才能被正常使用。
这种“会员卡+刷卡认证”的设计理念，就是Session认证机制的精髓。</p></blockquote> <h4 id="_6、session的工作原理"><a href="#_6、session的工作原理" class="header-anchor">#</a> 6、Session的工作原理</h4> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1668331691374-6d8e3e68-6a0c-448b-9c59-5af4ecacffd9.png#averageHue=%23f6f9f6&amp;clientId=u2ecfedc6-8d84-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=337&amp;id=u5456e5da&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=464&amp;originWidth=938&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=186319&amp;status=done&amp;style=none&amp;taskId=u6669142b-8398-4d29-a44e-f4ef3f9b492&amp;title=&amp;width=682.1818181818181" referrerpolicy="no-referrer"> <h3 id="在-express-中使用-session-认证"><a href="#在-express-中使用-session-认证" class="header-anchor">#</a> 在 Express 中使用 Session 认证</h3> <h4 id="_1、安装-express-session-中间件"><a href="#_1、安装-express-session-中间件" class="header-anchor">#</a> 1、安装 express-session 中间件</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> express-session
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2、配置-express-session-中间件"><a href="#_2、配置-express-session-中间件" class="header-anchor">#</a> 2、配置 express-session 中间件</h4> <blockquote><p><code>express-session</code>中间件安装成功后，需要通过<code>app.use()</code>来注册<code>session</code>中间件  ，示例代码如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 导入session中间件</span>
<span class="token keyword">const</span> session <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span>
<span class="token comment">//2.配置Session中问件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">'keyboard cat'</span><span class="token punctuation">,</span><span class="token comment">//secret属性的值可以为任意字符串</span>
  <span class="token literal-property property">resave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 固定写法</span>
  <span class="token literal-property property">saveUninitialized</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//固定写法</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3、向-session-中存数据"><a href="#_3、向-session-中存数据" class="header-anchor">#</a> 3、向 session 中存数据</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
	<span class="token comment">//断用户提交的录信息员香正确</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>username <span class="token operator">!=</span> <span class="token string">'admin'</span> <span class="token operator">||</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>password <span class="token operator">!=</span> <span class="token string">'000000'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'登录失败'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
  <span class="token comment">// 注意：只有成功配置了express-session这个中间件之后，才能够通过req点出来session这个属性</span>

	req<span class="token punctuation">.</span>se5sion<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token comment">// 将用户的信息，存储倒Session中</span>
	req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token boolean">true</span><span class="token comment">// 将用户的登录状态，存到Session中</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'登录成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_4、从-session-中的数据"><a href="#_4、从-session-中的数据" class="header-anchor">#</a> 4、从 session 中的数据</h4> <blockquote><p>可以直接从<code>req.session</code>对象上获取之前存储的数据，示例代码如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//获取用户姓名的接口</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/username'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token comment">//判断用户是否登录</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>islogin<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">status</span><span class="token operator">:</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'fail'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">status</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token literal-property property">username</span><span class="token operator">:</span> req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5、清空-session"><a href="#_5、清空-session" class="header-anchor">#</a> 5、清空 session</h4> <blockquote><p>调用<code>req.session.destroy()</code>函数，即可清空服务器保存的<code>session</code>信息。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//退出登录的接口</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/logout'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 清空当前客户端对应的session信息</span>
	req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
		<span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'退出登录成功'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="jwt-认证机制"><a href="#jwt-认证机制" class="header-anchor">#</a> JWT 认证机制</h3> <h4 id="_1、了解-session-认证的局限性"><a href="#_1、了解-session-认证的局限性" class="header-anchor">#</a> 1、了解 Session 认证的局限性</h4> <blockquote><p><code>Session</code>认证机制需要配合<code>Cookie</code>才能实现。由于<code>Cookie</code>默认不支持跨域访问，所以，当涉及到前端跨域请求后端接口的时候，需要做很多额外的配置，才能实现跨域<code>Session</code>认证</p> <ul><li>当前端请求后端接口不存在跨域问题的时候，推荐使用<code>Session</code>身份认证机制。</li> <li>当前端需要跨域请求后端接口的时候，不推荐使用<code>Session</code>身份认证机制，推荐使用<code>JWT</code>认证机制。</li></ul></blockquote> <h4 id="_2、-什么是-jwt"><a href="#_2、-什么是-jwt" class="header-anchor">#</a> 2、 什么是 <code>JWT</code></h4> <blockquote><p><code>JWT</code>(英文全称：JSON Web Token)是目前最流行的跨域认证解决方案。</p></blockquote> <h4 id="_3、jwt的中作原理"><a href="#_3、jwt的中作原理" class="header-anchor">#</a> 3、JWT的中作原理</h4> <img src="https://cdn.nlark.com/yuque/0/2022/png/28469598/1668334178494-86dd3636-e56d-4ed6-ad91-a7cd816d4e39.png#averageHue=%23f6f4f4&amp;clientId=u2ecfedc6-8d84-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=303&amp;id=u2ebbd638&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=416&amp;originWidth=800&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=132902&amp;status=done&amp;style=none&amp;taskId=uf45e0146-3cda-4810-a9d2-ebb34c7d468&amp;title=&amp;width=581.8181818181819" referrerpolicy="no-referrer">
&gt; 总结：用户的信息通过`Token`字符串的形式，保存在客户端浏览器中。服务器通过还原`Token`字符串的形式来认证用户的身份。
<h4 id="_4、jwt-的组成部分"><a href="#_4、jwt-的组成部分" class="header-anchor">#</a> 4、JWT 的组成部分</h4> <blockquote><p>JWT通常由三部分组成，分别是<code>Header</code>(头部)、<code>Payload</code>(有效荷载)、<code>Signature</code>(签名)。
三者之间使用英文的“<code>.</code>”分隔，格式如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Header<span class="token punctuation">.</span>Payload<span class="token punctuation">.</span>Signature
<span class="token comment">// 示例</span>
eyJhbGcioiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token punctuation">.</span>eyJpZCI6MSwidxNIcm5hbwuioiJhZG1pbiIsInBhc3N3b3JkIjoiliwibmlja25
hbwui0iLms6xlt7T1t7QiLCJlbWFpbCI6Im5pYmFiYUBpdGNhc3QuY241LCJ1c2vyX3BpYyI6IiIsImlhdCI6MTU30DAZNjY4Miw
izXhwIjoxNTc4MDcyNjgyfQ<span class="token punctuation">.</span>Wq7GqCxJPK<span class="token operator">-</span>EA8LNrtMG0411KdZ3359KBL3XeuBxuI
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><ul><li><code>Payload</code>部分才是真正的用户信息，它是用户信息经过加密之后生成的字符串。</li> <li><code>Header</code>和<code>Signature</code>是安全性相关的部分，只是为了保证<code>Token</code>的安全性。</li></ul></blockquote> <h4 id="_5、-jwt-的使用方式"><a href="#_5、-jwt-的使用方式" class="header-anchor">#</a> 5、 JWT 的使用方式</h4> <blockquote><p>客户端收到服务器返回的<code>JWT</code>之后，通常会将它储存在<code>localStorage</code>或<code>sessionStorage</code>中。
此后，客户端每次与服务器通信，都要带上这个<code>JWT</code>的字符串，从而进行身份认证。推荐的做法是把<code>JWT</code>放在<code>HTTP</code>请求头的<code>Authorization</code>字段中，格式如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">Authorization</span><span class="token operator">:</span> Beares <span class="token operator">&lt;</span>token<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="在express-中使用-jwt"><a href="#在express-中使用-jwt" class="header-anchor">#</a> 在Express 中使用 JWT</h3> <h4 id="_1、安装-jwt-相关的包"><a href="#_1、安装-jwt-相关的包" class="header-anchor">#</a> 1、安装 JWT 相关的包</h4> <blockquote><p>运行如下命令，安装如下两个WT相关的包：</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> jsonwebtoken express-jwt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><ul><li><code>jsonwebtoken</code>用于生成<code>JWT</code>字符串</li> <li><code>express-jwt</code>用于将<code>JWT</code>字符串解析还原成<code>JSON</code>对象</li></ul></blockquote> <h4 id="_2、导入jwt相关的包"><a href="#_2、导入jwt相关的包" class="header-anchor">#</a> 2、导入JWT相关的包</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">requery</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> expressJWT <span class="token operator">=</span> <span class="token function">requery</span><span class="token punctuation">(</span><span class="token string">'express-jwt'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_3、定义-secret-密钥"><a href="#_3、定义-secret-密钥" class="header-anchor">#</a> 3、定义 secret 密钥</h4> <blockquote><p>为了保证WT字符串的安全性，防止WT字符串在网络传输过程中被别人破解，我们需要专门定义一个用于加密和解密的<code>secret</code>密钥：</p> <ul><li>① 当生成<code>JWT</code>字符串的时候，需要使用<code>secret</code>密钥对用户的信息进行加密，最终得到助加密好的<code>JWT</code>字符串</li> <li>② 当把<code>JWT</code>字符串解析还原成<code>JSON</code>对象的时候，需要使用<code>secret</code>密钥进行解密</li></ul></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> secretKey <span class="token operator">=</span> <span class="token string">'自定义的字符串'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4、在登录成功后生成jwt字符串"><a href="#_4、在登录成功后生成jwt字符串" class="header-anchor">#</a> 4、在登录成功后生成JWT字符串</h4> <blockquote><p>调用<code>jsonwebtoken</code>包提供的<code>sign()</code>方法，将用户的信息加密成<code>JWT</code>字符串，响应给客户端：
sign()有三个参数
参数1：用户的信息
参数2：机密的密钥
参数3：配置对象，可以配置当前 token 的有效期</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 登录接口</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/login'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">.</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// 用户登录成功之后，生成JWT字符串，通过 tokn 属性响应给客户端</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">status</span><span class="token operator">:</span><span class="token number">200.</span>
		<span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">'登录成功!'</span><span class="token punctuation">,</span>
 		<span class="token comment">//调用jwt.sign() 生成 JWT 字符审，三个参数分别是：用户信息对象、加密密钥、配置对象</span>
		<span class="token literal-property property">token</span><span class="token operator">:</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> userinfo<span class="token punctuation">.</span>username <span class="token punctuation">}</span><span class="token punctuation">,</span> secretKey<span class="token punctuation">,</span> <span class="token literal-property property">expiresIn</span><span class="token operator">:</span> <span class="token string">'30s'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_5、将jwt字符串还原为json对象"><a href="#_5、将jwt字符串还原为json对象" class="header-anchor">#</a> 5、将<code>JWT</code>字符串还原为<code>JSON</code>对象</h4> <blockquote><p>客户端海次在访问那些有权限接口的时候，都需要主动通过请求头中的<code>Authorization</code>字段，将<code>Token</code>字符串发送到服务器进行身份认证。
此时，服务器可以通过<code>express-jwt</code>这个中间件，自动将客户端发送过来的<code>Token</code>解析还原成<code>JSON</code>对象：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 使用app.use()来注册中间件</span>
<span class="token comment">// expressJWT({ secret:secretKey })就是用来解析Token的中间件</span>
<span class="token comment">// .unless({ path:[/^\/api\//] })用来指定哪些接口不需要访问权限</span>
<span class="token comment">// 注意：只要配置成功了express-jwt这个中间件，就可以把解析出来的用户信息，挂载到req.user属性上</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">expressJWT</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">secret</span><span class="token operator">:</span> secretKey <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unless</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_6、使用-req-user-获取用户信息"><a href="#_6、使用-req-user-获取用户信息" class="header-anchor">#</a> 6、使用 req.user 获取用户信息</h4> <blockquote><p>当<code>express-jwt</code>这个中间件配置成功之后，即可在那些有权限的接口中，使用<code>req.user</code>对像，来访问从<code>JWT</code>字符串中解析出来的用户信息了，示例代码如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 这是一个有权限的API接口</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/admin/getinfo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 当配置成功expressJWT后会有req.user这个对象</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
		<span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'获取用户信息成功！'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> req<span class="token punctuation">.</span>user
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_7、捕获解析jwt失败后产生的错误"><a href="#_7、捕获解析jwt失败后产生的错误" class="header-anchor">#</a> 7、捕获解析JWT失败后产生的错误</h4> <blockquote><p>当使用<code>express-jwt</code>解析<code>Token</code>字符串时，如果客户端发送过来的<code>Token</code>字符串过期或不合法，会产生一个解析失败的错误，影响项目的正常运行。我们可以通过<code>Express</code>的错误中间件，捕获这个错误并进行相关的处理，示例代码如下：</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token comment">//token解析失败导致的错误</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name <span class="token operator">===</span><span class="token string">'UnauthorizedError'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span><span class="token number">401</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'无效的token'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//其它原因导致的错误</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'未知错误'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2022-12-03 21-03-14</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/notes/backend/nodejs/express.html" class="prev">
        Express
      </a></span> <span class="next"><a href="/note/notes/backend/nodejs/buildProject.html">
        项目搭建
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/note/assets/js/app.6137f109.js" defer></script><script src="/note/assets/js/2.a83e5f1b.js" defer></script><script src="/note/assets/js/1.e9423e49.js" defer></script><script src="/note/assets/js/30.f5326d79.js" defer></script>
  </body>
</html>
