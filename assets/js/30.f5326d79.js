(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{319:function(s,t,a){"use strict";a.r(t);var e=a(10),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"数据库与身份认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库与身份认证"}},[s._v("#")]),s._v(" 数据库与身份认证")]),s._v(" "),t("h2",{attrs:{id:"数据库的基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库的基本概念"}},[s._v("#")]),s._v(" 数据库的基本概念")]),s._v(" "),t("h3",{attrs:{id:"什么是数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是数据库"}},[s._v("#")]),s._v(" 什么是数据库")]),s._v(" "),t("blockquote",[t("p",[s._v("数据库(database)是用来组织、存储和管理数据的仓库。\n当今世界是一个充满着数据的互联网世界，充斥看着大量的数据。数据的来源有很多，比如出行记录、消费记录浏览的网页、发送的消息等等。除了文本类型的数据，图像、音乐、声音都是数据。\n为了方便管理互联网世界中的数据，就有了数据库管理系统的概念（简称：数据库）。用户可以对数据库中的数据进行新增、查询、更新、删除等操作。")])]),s._v(" "),t("h3",{attrs:{id:"常见数据库及分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见数据库及分类"}},[s._v("#")]),s._v(" 常见数据库及分类")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("code",[s._v("MySQL")]),s._v("数据库（目前使用最广泛、流行度最高的开源免费数据库；"),t("code",[s._v("Community+Enterprise")]),s._v(")")]),s._v(" "),t("li",[t("code",[s._v("Oracle")]),s._v("数据库（收费）")]),s._v(" "),t("li",[t("code",[s._v("SQL Serve")]),s._v("r数据库（收费）")]),s._v(" "),t("li",[t("code",[s._v("Mongodb")]),s._v("数据库("),t("code",[s._v("Community+Enterprise")]),s._v(")")])])]),s._v(" "),t("p",[s._v("其中，"),t("code",[s._v("MySQL")]),s._v("、"),t("code",[s._v("Oracle")]),s._v("、"),t("code",[s._v("SQL Server")]),s._v("属于传统型数据库（又叫做：关系型数据库或"),t("code",[s._v("SQL")]),s._v("数据库），这三者的设计理念相同，用法比较类似。")]),s._v(" "),t("blockquote",[t("p",[s._v("而"),t("code",[s._v("Mongodb")]),s._v("属于新型数据库（又叫做：非关系型数据库或"),t("code",[s._v("NoSQL")]),s._v("数据库），它在一定程度上弥补了传统型数据库的缺陷。")])]),s._v(" "),t("h3",{attrs:{id:"创痛型数据库的数据组织结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创痛型数据库的数据组织结构"}},[s._v("#")]),s._v(" 创痛型数据库的数据组织结构")]),s._v(" "),t("blockquote",[t("p",[s._v("数据的组织结构：指的就是数据以什么样的结构进行存储。")])]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1667906117797-8ce21ec5-ba9c-4b96-95c6-f8f7d694c141.png#averageHue=%2383735f&clientId=u963b2522-1215-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=304&id=LeDQT&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=512&originalType=binary&ratio=1&rotation=0&showTitle=false&size=337680&status=done&style=none&taskId=u22c08738-7b0f-48be-ab52-2afbd8643c0&title=&width=372.3636363636364",referrerpolicy:"no-referrer"}}),s._v("\n> 传统型数据库的数据组织结构，与`Excel`中数据的组织结构比较类似。\n> 因此，我们可以对比着`Excel`来了解和学习传统型数据库的数据组织结构。\n"),t("blockquote",[t("p",[s._v("数据的组织结构分为数据库("),t("code",[s._v("database")]),s._v(")、数据表("),t("code",[s._v("table")]),s._v(")、数据行("),t("code",[s._v("row")]),s._v(")、字段("),t("code",[s._v("field")]),s._v(")这4大部分组成。")])]),s._v(" "),t("h4",{attrs:{id:"实际开发库、表、行、字段的关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实际开发库、表、行、字段的关系"}},[s._v("#")]),s._v(" 实际开发库、表、行、字段的关系")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("① 在实际项目开发中，一般情况下，每个项目都对应独立的数据库。")]),s._v(" "),t("li",[s._v("② 不同的数据，要存储到数据库的不同表中，例如：用户数据存储到"),t("code",[s._v("users")]),s._v("表中，图书数据存储到"),t("code",[s._v("books")]),s._v("表中。")]),s._v(" "),t("li",[s._v("③ 每个表中具体存储哪些信息，由字段来决定，例如：我们可以为"),t("code",[s._v("users")]),s._v("，表设计"),t("code",[s._v("id")]),s._v("、"),t("code",[s._v("username")]),s._v("、"),t("code",[s._v("password")]),s._v("这3个字段。")]),s._v(" "),t("li",[s._v("④ 表中的行，代表每一条具体的数据")])])]),s._v(" "),t("h2",{attrs:{id:"安装并配置mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装并配置mysql"}},[s._v("#")]),s._v(" 安装并配置"),t("code",[s._v("MySQL")])]),s._v(" "),t("h3",{attrs:{id:"了解需要安装哪些-mysql相关的软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#了解需要安装哪些-mysql相关的软件"}},[s._v("#")]),s._v(" 了解需要安装哪些,MySQL相关的软件")]),s._v(" "),t("blockquote",[t("p",[s._v("对于开发人员来说，只需要安装"),t("code",[s._v("MySQL Server")]),s._v("和"),t("code",[s._v("MySQL Workbench")]),s._v("这两个软件，就能满足开发的需要了.")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("MySQL Server")]),s._v(": 专门用来提供数据存储和服务的软件。")]),s._v(" "),t("li",[t("code",[s._v("MySQL Workbench")]),s._v(": 可视化的"),t("code",[s._v("MySQL")]),s._v("管理工具，通过它，可以方便的操作存储在"),t("code",[s._v("MySQL Server")]),s._v("中的数据。")])])]),s._v(" "),t("h3",{attrs:{id:"mysql-在-mac-环境下的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-在-mac-环境下的安装"}},[s._v("#")]),s._v(" "),t("code",[s._v("MySQL")]),s._v(" 在 Mac 环境下的安装")]),s._v(" "),t("blockquote",[t("p",[s._v("在Mac环境下安装MySQL的过程比Windows环境下的步骤简单很多：")]),s._v(" "),t("ul",[t("li",[s._v("① 先运行"),t("code",[s._v("mysq-8.0.19-macos10.15-x8664.dmg")]),s._v("这个安装包，将"),t("code",[s._v("MySQL Server")]),s._v("安装到Mac系统")]),s._v(" "),t("li",[s._v("② 再运行"),t("code",[s._v("mysql-workbench-community-8.0.19-macos-x8664.dmg")]),s._v("这个安装包，将可视化的"),t("code",[s._v("MySQLWorkbench")]),s._v("工具安装到Mac系统")])])]),s._v(" "),t("h3",{attrs:{id:"mysql-在-windows-环境下的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-在-windows-环境下的安装"}},[s._v("#")]),s._v(" "),t("code",[s._v("MySQL")]),s._v(" 在 "),t("code",[s._v("Windows")]),s._v(" 环境下的安装")]),s._v(" "),t("p",[s._v("在官网上自己搜索下载")]),s._v(" "),t("h2",{attrs:{id:"mysql-的基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-的基本使用"}},[s._v("#")]),s._v(" "),t("code",[s._v("MySQL")]),s._v(" 的基本使用")]),s._v(" "),t("h3",{attrs:{id:"使用mysql-workbench管理数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用mysql-workbench管理数据库"}},[s._v("#")]),s._v(" 使用"),t("code",[s._v("MySQL Workbench")]),s._v("管理数据库")]),s._v(" "),t("h4",{attrs:{id:"_1、创建数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建数据库"}},[s._v("#")]),s._v(" 1、创建数据库")]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1667993967843-1603b9be-193b-4dd7-93e9-6927f9d12d98.png#averageHue=%23f7fbf8&clientId=u2ecfedc6-8d84-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=351&id=ucf1b8fea&margin=%5Bobject%20Object%5D&name=image.png&originHeight=483&originWidth=852&originalType=binary&ratio=1&rotation=0&showTitle=false&size=194642&status=done&style=none&taskId=uf28c1818-f638-4b51-bb32-89f152f3a0a&title=&width=619.6363636363636",referrerpolicy:"no-referrer"}}),s._v(" "),t("h4",{attrs:{id:"_2、创建数据表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建数据表"}},[s._v("#")]),s._v(" 2、创建数据表")]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1667995218051-80899a61-a754-4c18-ad75-2460d83e294b.png#averageHue=%23f3f6f3&clientId=u2ecfedc6-8d84-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=309&id=u7431a64b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=425&originWidth=1053&originalType=binary&ratio=1&rotation=0&showTitle=false&size=280151&status=done&style=none&taskId=u7d8f3ec0-27fb-4d08-99ed-42ed8da6e77&title=&width=765.8181818181819",referrerpolicy:"no-referrer"}}),s._v(" "),t("h4",{attrs:{id:"_3、向表中写入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、向表中写入数据"}},[s._v("#")]),s._v(" 3、向表中写入数据")]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1667995532141-a34a195e-607c-46b8-b490-a65b53d90271.png#averageHue=%23f5f8f6&clientId=u2ecfedc6-8d84-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=312&id=ubde6d57d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=429&originWidth=743&originalType=binary&ratio=1&rotation=0&showTitle=false&size=203227&status=done&style=none&taskId=uc3d686c8-6aca-405f-b3de-100518ef8f0&title=&width=540.3636363636364",referrerpolicy:"no-referrer"}}),s._v(" "),t("h3",{attrs:{id:"使用-sql-管理数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-sql-管理数据库"}},[s._v("#")]),s._v(" 使用 SQL 管理数据库")]),s._v(" "),t("h4",{attrs:{id:"_1、什么是sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、什么是sql"}},[s._v("#")]),s._v(" 1、什么是SQL")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("SQL")]),s._v("(英文全称：Structured Query Language)是结构化查询语言，专门用来访问和处理数据库的编程语言。能够让我们以编程的形式，操作数据库里面的数据。\n三个关键点：")]),s._v(" "),t("ul",[t("li",[s._v("① "),t("code",[s._v("SQL")]),s._v("是一门数据库编程语言")]),s._v(" "),t("li",[s._v("② 使用"),t("code",[s._v("SQL")]),s._v("语言编写出来的代码，叫做"),t("code",[s._v("SQL")]),s._v("语句")]),s._v(" "),t("li",[s._v("③ "),t("code",[s._v("SQL")]),s._v("语言只能在关系型数据库中使用（例如"),t("code",[s._v("MySQL")]),s._v("、"),t("code",[s._v("Oracle")]),s._v("、"),t("code",[s._v("SQL Server")]),s._v(")。非关系型数据库（例如"),t("code",[s._v("Mongodb")]),s._v(")不支持"),t("code",[s._v("SQL")]),s._v("语言")])])]),s._v(" "),t("h4",{attrs:{id:"_2、sql能做什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、sql能做什么"}},[s._v("#")]),s._v(" 2、"),t("code",[s._v("SQL")]),s._v("能做什么")]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("从数据库中查询数据")]),s._v(" "),t("li",[s._v("向数据库中插入新的数据")]),s._v(" "),t("li",[s._v("更新数据库中的数据")]),s._v(" "),t("li",[s._v("从数据库删除数据")]),s._v(" "),t("li",[s._v("可以创建新数据库")]),s._v(" "),t("li",[s._v("可在数据库中创建新表")]),s._v(" "),t("li",[s._v("可在数据库中创建存储过程、视图")]),s._v(" "),t("li",[s._v("etc.…")])])]),s._v(" "),t("p",[t("strong",[s._v("需要学习的")])]),s._v(" "),t("blockquote",[t("p",[s._v("重点掌握如何使用SQL从数据表中：\n查询数据("),t("code",[s._v("select")]),s._v(")、插入数据("),t("code",[s._v("insert into")]),s._v(")、更新数据("),t("code",[s._v("update")]),s._v(")、删除数据("),t("code",[s._v("delete")]),s._v(")\n颜外需要掌握的4种SQL语法：\n"),t("code",[s._v("where")]),s._v("条件、"),t("code",[s._v("and")]),s._v("和"),t("code",[s._v("or")]),s._v("运算符、"),t("code",[s._v("order by")]),s._v("排序、"),t("code",[s._v("count(*)")]),s._v("函数")])]),s._v(" "),t("h3",{attrs:{id:"sql-的-select-语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-的-select-语句"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 的 "),t("code",[s._v("SELECT")]),s._v(" 语句")]),s._v(" "),t("blockquote",[t("p",[s._v("SELECT语句用于从表中查询数据。执行的结果被存储在一个结果表中（称为结果集）。语法格式\n如下：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--从FROM指定的【表中】，查询出【所有的】数据.*表示【所有列】")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" 表名称\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--从FROM指定的【表中】，查询出指定列名称（字段）的数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" 列名称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" 表名称\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--多个列之间用逗号隔开")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" users\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[s._v("注意："),t("code",[s._v("SQL")]),s._v("语句中的关键字对大小写不敏感。"),t("code",[s._v("SELECT")]),s._v("等效于"),t("code",[s._v("select")]),s._v(","),t("code",[s._v("FROM")]),s._v("等效于"),t("code",[s._v("from")]),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"sql-的-insert-info"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-的-insert-info"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 的 "),t("code",[s._v("INSERT INFO")])]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("INSERT INTO")]),s._v("语句用于向数据表中插入新的数据行，语法格式如下：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 语法解读：向指症的表中，插入如下几列数据，列的值通过va1ues一指定")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 注意：列和值要一对应，多个列和多个值之间，使用英文的逗号分隔")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" 表名 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("列"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 列"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ···"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("值"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 值"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"sql-的-update-语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-的-update-语句"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 的 "),t("code",[s._v("UPDATE")]),s._v(" 语句")]),s._v(" "),t("blockquote",[t("p",[s._v("Update语句用于修改表中的数据。语法格式如下：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1,用UPDATE指定要更新鄂个表中的数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2.用SET指定列对应的新值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3.用WHERE指定更新的条件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" 表称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" 列名称 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 新值 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 列名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("某值\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 更新多列")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" 表称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" 列名称 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 新值"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 列名称"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 新值 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 列名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("某值\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"sql-的-detail-语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-的-detail-语句"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 的 "),t("code",[s._v("DETAIL")]),s._v(" 语句")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 注意：对初学者来说，经常忘记提供WHERE条件，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 从而导致误到整张表的数据！一定要慎重！")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"sql-中的-where-子句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-中的-where-子句"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 中的 "),t("code",[s._v("WHERE")]),s._v(" 子句")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("WHERE")]),s._v("子句用于限定选择的标准。在"),t("code",[s._v("SELECT")]),s._v("、"),t("code",[s._v("UPDATE")]),s._v("、"),t("code",[s._v("DELETE")]),s._v("语句中，皆可使用"),t("code",[s._v("WHERE")]),s._v("子句来限定选择的标准。")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查询语句中的WHERE条件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" 列名称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" 表名称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 列运算符值\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 更新语句中的WHERE条件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" 表名称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" 列"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("新值 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 列运算符值\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 别除语句中的HERE条件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" 表名称 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 列运算符值\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("strong",[s._v("可以在 where 子句中使用的运算符")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("操作符")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("=")])]),s._v(" "),t("td",[s._v("等于")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("<>")])]),s._v(" "),t("td",[s._v("不等于")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v(">")])]),s._v(" "),t("td",[s._v("大于")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("<")])]),s._v(" "),t("td",[s._v("小于")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v(">=")])]),s._v(" "),t("td",[s._v("大于等于")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("<=")])]),s._v(" "),t("td",[s._v("小于等于")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("BETWEEN")])]),s._v(" "),t("td",[s._v("在某个范围内")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("LIKE")])]),s._v(" "),t("td",[s._v("搜索某种模式")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("注意：在某些版本的"),t("code",[s._v("SQL")]),s._v("中，操作符"),t("code",[s._v("<>")]),s._v("可以写为"),t("code",[s._v("!=")])])]),s._v(" "),t("h3",{attrs:{id:"sql-中的-and-和-or-运算符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-中的-and-和-or-运算符"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 中的 "),t("code",[s._v("AND")]),s._v(" 和 "),t("code",[s._v("OR")]),s._v(" 运算符")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("AND")]),s._v("和"),t("code",[s._v("OR")]),s._v("可在"),t("code",[s._v("WHERE")]),s._v("子语句中把两个或多个条件结合起来。\n"),t("code",[s._v("AND")]),s._v("表示必须同时满足多个条件，相当于"),t("code",[s._v("JavaScript")]),s._v("中的"),t("code",[s._v("&&")]),s._v("运算符，例如"),t("code",[s._v("if(a!==10&&a!==20)")]),s._v(" "),t("code",[s._v("OR")]),s._v("表示只要满足任意一个条件即可，相当于"),t("code",[s._v("JavaScript")]),s._v("中的‖运算符，例如"),t("code",[s._v("if(a!==10‖a!==20)")])])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 获取status=0且id=2的数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"sql-中的-order-by-子句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-中的-order-by-子句"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 中的 "),t("code",[s._v("ORDER BY")]),s._v(" 子句")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("ORDER BY")]),s._v("语句用于根据指定的列对结果集进行排序。")]),s._v(" "),t("p",[t("code",[s._v("ORDER BY")]),s._v("语句默队按照升序对记录进行排序。")]),s._v(" "),t("p",[s._v("如果您希望按照降序对记录进行排序，可以使用"),t("code",[s._v("DESC")]),s._v("关键字。")])]),s._v(" "),t("h4",{attrs:{id:"order-by-升序排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#order-by-升序排序"}},[s._v("#")]),s._v(" "),t("code",[s._v("ORDER BY")]),s._v(" - 升序排序")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 对users表中的数据，按照status字段进行升序排序，示例如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 因为ORDER BY默认进行升序排序：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 其中，SC关键字代表升序排序")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"order-by-降序排列"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#order-by-降序排列"}},[s._v("#")]),s._v(" "),t("code",[s._v("ORDER BY")]),s._v(" - 降序排列")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 对users表中的数据，按照id字段进行降序排序，示例如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"order-by-多重排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#order-by-多重排序"}},[s._v("#")]),s._v(" "),t("code",[s._v("ORDER BY")]),s._v(" - 多重排序")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 对users表中的数据，先按照status字段进行降序排序，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 再按照username的字母顺序，进行升序排序，示例如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"sql-的-count-函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-的-count-函数"}},[s._v("#")]),s._v(" "),t("code",[s._v("SQL")]),s._v(" 的 "),t("code",[s._v("COUNT(*)")]),s._v(" 函数")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("COUNT(*)")]),s._v("函数用于返回查询结果的总数据条数，语法格式如下：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" 表名称\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"count-示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#count-示例"}},[s._v("#")]),s._v(" "),t("code",[s._v("count(*)")]),s._v(" 示例")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查询users表中status为0的总数据条数：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"使用-as-设置别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-as-设置别名"}},[s._v("#")]),s._v(" 使用 "),t("code",[s._v("AS")]),s._v(" 设置别名")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" 新列表 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 示例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" un"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pw "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"在项目中使用-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在项目中使用-mysql"}},[s._v("#")]),s._v(" 在项目中使用 "),t("code",[s._v("MySQL")])]),s._v(" "),t("h3",{attrs:{id:"在项目中使用mysql的步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在项目中使用mysql的步骤"}},[s._v("#")]),s._v(" 在项目中使用"),t("code",[s._v("mysql")]),s._v("的步骤")]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("安装操作"),t("code",[s._v("MySQL")]),s._v("数据库的第三方模块("),t("code",[s._v("mysql")]),s._v(")")]),s._v(" "),t("li",[s._v("通过"),t("code",[s._v("mysql")]),s._v("模块连接到"),t("code",[s._v("MySQL")]),s._v("数据库")]),s._v(" "),t("li",[s._v("通过"),t("code",[s._v("mysql")]),s._v("模块执行"),t("code",[s._v("SQL")]),s._v("语句")])])]),s._v(" "),t("h3",{attrs:{id:"安装与配置mysql模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装与配置mysql模块"}},[s._v("#")]),s._v(" 安装与配置"),t("code",[s._v("mysql")]),s._v("模块")]),s._v(" "),t("h4",{attrs:{id:"_1、安装-mysql-模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装-mysql-模块"}},[s._v("#")]),s._v(" 1、安装 "),t("code",[s._v("mysql")]),s._v(" 模块")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("mysql")]),s._v("模块是托管于"),t("code",[s._v("npm")]),s._v("上的第三方模块。它提供了在"),t("code",[s._v("Node.js")]),s._v("项目中连接和操作"),t("code",[s._v("MySQL")]),s._v("数据库的能力。想要在项目中使用它，需要先运行如下命令，将ysql安装为项目的依赖包：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("npm i mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_2、配置-mysql-模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置-mysql-模块"}},[s._v("#")]),s._v(" 2、配置 "),t("code",[s._v("mysql")]),s._v(" 模块")]),s._v(" "),t("blockquote",[t("p",[s._v("在使用"),t("code",[s._v("mysql")]),s._v("模块操作"),t("code",[s._v("MySQL")]),s._v("数据库之前，必须先对"),t("code",[s._v("mysql")]),s._v("模块进行必要的配置，主要的配置步骤如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.导入mysq1模块")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" mysql "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.建立与山y5QL数据库的连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("  mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createPool")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//数据库的IP地址")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//登录数据库的账号")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//登录数据库的密码")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("database")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my_db_01'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定要操作哪个数据库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"_3、测试-mysql-模块是否正常工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、测试-mysql-模块是否正常工作"}},[s._v("#")]),s._v(" 3、测试 mysql 模块是否正常工作")]),s._v(" "),t("blockquote",[t("p",[s._v("调用"),t("code",[s._v("db.query()")]),s._v("函数，指定要执行的"),t("code",[s._v("SQL")]),s._v("语句，通过回调函数拿到执行的结果：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 检测mysq1模块的香正常工作")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SELECT 1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" results")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//只要能打印出 [ RowDataPacket {'1':1} ] 的结果，就证明数据库连接正常")]),s._v("\n\tconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("results"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"使用mysql操作mysql数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用mysql操作mysql数据库"}},[s._v("#")]),s._v(" 使用"),t("code",[s._v("mysql")]),s._v("操作"),t("code",[s._v("MySql")]),s._v("数据库")]),s._v(" "),t("h4",{attrs:{id:"_1、查询数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、查询数据"}},[s._v("#")]),s._v(" 1、查询数据")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询users表中的所有数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from users'")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'搜索失败 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：如果执行的是select查询语句，则执行的结果是数组")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'搜索成功 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"_2、插入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、插入数据"}},[s._v("#")]),s._v(" 2、插入数据")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 向users表中新增数据，其中username为 哈哈哈,password为hhhhhh。示例代码如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'哈哈哈'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hhhhhh'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'insert into users (username, password) values (?, ?)'")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'搜索失败 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：如果执行的是insert into插入语句，则results是一个对象")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以通过affectedRows属性，来判断是否插入数据成功")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("affectedRows "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'插入成功'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("strong",[s._v("插入数据的便捷方式")])]),s._v(" "),t("blockquote",[t("p",[s._v("向表中新增数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速插入数据：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插入数据的便捷方式，示例代码如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'嘿嘿嘿'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'h1h1h1'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'insert into users set ?'")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'搜索失败 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：如果执行的是insert into插入语句，则results是一个对象")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以通过affectedRows属性，来判断是否插入数据成功")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("affectedRows "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'插入成功'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"_3、更新数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、更新数据"}},[s._v("#")]),s._v(" 3、更新数据")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'张三'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'z1z1z1'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'update users set username=?, password=? where id=?'")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新失败 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：执行了update语句之后，执行的结果，也是一个对象，可以通过affectedRows判断是否更新成功")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("affectedRows "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新成功'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("更新数据的便捷方式")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新数据便捷方式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'李四'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'l1l1l1'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'update users set ? where id=?'")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新失败 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("affectedRows "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新成功'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"_4、删除数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、删除数据"}},[s._v("#")]),s._v(" 4、删除数据")]),s._v(" "),t("blockquote",[t("p",[s._v("在删除数据时，推荐根据d这样的唯一标识，来删除对应的数据。示例如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'delete from users where id=?'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：如果SQL语句中有多个占位符，则必须使用数组为每个占位符指定具体的值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//       如果SQL语句中只有一个占位符，则可以省略数组")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'删除失败 => '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("affectedRows "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'删除成功'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"_5、标记删除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、标记删除"}},[s._v("#")]),s._v(" 5、标记删除")]),s._v(" "),t("blockquote",[t("p",[s._v("使用"),t("code",[s._v("DELETE")]),s._v("语句，会把真正的把数据从表中别除掉。为了保险起见，推荐使用标记删除的形式，来模拟删除的动作。\n所谓的标记删除，就是在表中设置类似于"),t("code",[s._v("status")]),s._v("这样的状态字段，来标记当前这条数据是否被删除。\n当用户执行了删除的动作时，我们并没有执行"),t("code",[s._v("DELETE")]),s._v("语句把数据删除掉，而是执行了"),t("code",[s._v("UPDATE")]),s._v("语句，将这条数据对应的"),t("code",[s._v("status")]),s._v("字段标记为删除即可。")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//须记除：使用UPDATE语句普代DELETE语句：只更新数的状态，并没有真正除")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sqlStr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'update users set status=1 where id=?'")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sqlStr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("results")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("results"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("affectedRows"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'删除数据城功！'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//成功")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"前后端的身份认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前后端的身份认证"}},[s._v("#")]),s._v(" 前后端的身份认证")]),s._v(" "),t("h3",{attrs:{id:"web-开发模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-开发模式"}},[s._v("#")]),s._v(" Web 开发模式")]),s._v(" "),t("blockquote",[t("p",[s._v("目前主流的Web开发模式有两种，分别是：")]),s._v(" "),t("ul",[t("li",[s._v("① 基于服务端渲染的传统"),t("code",[s._v("Web")]),s._v("开发模式")]),s._v(" "),t("li",[s._v("② 基于前后端分离的新型"),t("code",[s._v("Web")]),s._v("开发模式")])])]),s._v(" "),t("h4",{attrs:{id:"_1、服务器端渲染的web开发模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、服务器端渲染的web开发模式"}},[s._v("#")]),s._v(" 1、服务器端渲染的Web开发模式")]),s._v(" "),t("blockquote",[t("p",[s._v("服务端渲染的概念：服务器发送给客户端的HTML页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要使用Ajx这样的技术额外请求页面的数据。")])]),s._v(" "),t("p",[t("strong",[s._v("优点：")])]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("①前端耗时少。因为服务器端负责动态生成"),t("code",[s._v("HTML")]),s._v("内容，浏览器只需要直接渲染页面即可。尤其是移动端更省电。")]),s._v(" "),t("li",[s._v("②有利于"),t("code",[s._v("SEO")]),s._v("。因为服务器端响应的是完整的"),t("code",[s._v("HTML")]),s._v("页面内容，所以爬虫更容易爬取获得信息，更有利"),t("code",[s._v("SEO")]),s._v("。")])])]),s._v(" "),t("p",[t("strong",[s._v("缺点：")])]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("① 占用服务器端资源。即服务器端完成"),t("code",[s._v("HTML")]),s._v("页面内容的拼接，如果请求较多，会对服务器造成一定的访问压力。")]),s._v(" "),t("li",[s._v("② 不利于前后端分离，开发效率低。使用服务器端渲染，则无法进行分工合作，尤其对于前端复杂度高的项目，不利于项目高效开发。")])])]),s._v(" "),t("h4",{attrs:{id:"_2、前后端分离的web开发模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、前后端分离的web开发模式"}},[s._v("#")]),s._v(" 2、前后端分离的web开发模式")]),s._v(" "),t("blockquote",[t("p",[s._v("前后端分离的概念：前后端分离的开发模式，依赖于"),t("code",[s._v("Ajax")]),s._v("技术的广泛应用。简而言之，前后端分离的"),t("code",[s._v("Web")]),s._v("开发模式，就是后端只负责提供"),t("code",[s._v("API")]),s._v("接口，前端使用"),t("code",[s._v("Ajax")]),s._v("调用接口的开发模式。")])]),s._v(" "),t("p",[t("strong",[s._v("优点：")])]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("① 开发体验好。前端专注于"),t("code",[s._v("UI")]),s._v("页面的开发，后端专注于"),t("code",[s._v("api")]),s._v("的开发，且前端有更多的选择性。")]),s._v(" "),t("li",[s._v("② 用户体验好。"),t("code",[s._v("Ajax")]),s._v("技术的广泛应用，极大的提高了用户的体验，可以轻松实现页面的局部刷新。")]),s._v(" "),t("li",[s._v("③ 减轻了服务器端的渲染压力。因为页面最终是在每个用户的浏览器中生成的。")])])]),s._v(" "),t("p",[t("strong",[s._v("缺点：")])]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("①不利于"),t("code",[s._v("SEO")]),s._v("。因为完整的"),t("code",[s._v("HTML")]),s._v("页面需要在客户端动态拼接完成，所以爬虫对无法爬取页面的有效信息。（解决方案：利用"),t("code",[s._v("Vue")]),s._v("、"),t("code",[s._v("React")]),s._v("等前端框架的"),t("code",[s._v("SSR")]),s._v("(server side render))技术能够很好的解决"),t("code",[s._v("SEO")]),s._v("问题！)")])])]),s._v(" "),t("h4",{attrs:{id:"_3、如何选择web开发模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、如何选择web开发模式"}},[s._v("#")]),s._v(" 3、如何选择web开发模式")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("比如企业级网站，主要功能是展示而没有复杂的交互，并且需要良好的"),t("code",[s._v("SEO")]),s._v(",则这时我们就需要使用服务器端渲染；")]),s._v(" "),t("li",[s._v("而类似后台管理项目，交互性比较强，不需要考虑"),t("code",[s._v("SEO")]),s._v(",那么就可以使用前后端分离的开发模式。\n另外，具体使用何种开发模式并不是绝对的，为了同时兼顾了首页的渲染速度和前后端分离的开发效率，一些网站采用了首屏服务器端渲染+其他页面前后端分离的开发模式。")])])]),s._v(" "),t("h3",{attrs:{id:"身份认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#身份认证"}},[s._v("#")]),s._v(" 身份认证")]),s._v(" "),t("h4",{attrs:{id:"_1、什么是身份认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、什么是身份认证"}},[s._v("#")]),s._v(" 1、什么是身份认证")]),s._v(" "),t("blockquote",[t("p",[s._v("身份认证(Authentication)又称“身份验证”、“鉴权”，是指通过一定的手段，完成对用户身份的确认。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("日常生活中的身份认证随处可见，例如：高铁的验票乘车，手机的密码或指纹解锁，支付宝或微信的支付密码等。")])]),s._v(" "),t("li",[t("p",[s._v("在Wb开发中，也涉及到用户身份的认证，例如：各大网站的手机验证码登录、邮箱密码登录、二维码登录等。")])])])]),s._v(" "),t("h4",{attrs:{id:"_2、不同开发模式下的身份认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、不同开发模式下的身份认证"}},[s._v("#")]),s._v(" 2、不同开发模式下的身份认证")]),s._v(" "),t("blockquote",[t("p",[s._v("对于服务端谊染和前后端分离这两种开发模式来说，分别有看不同的身份认证方案：")]),s._v(" "),t("ul",[t("li",[s._v("① 服务端渲染推荐使用"),t("code",[s._v("Session")]),s._v("认证机制")]),s._v(" "),t("li",[s._v("② 前后端分离推荐使用"),t("code",[s._v("JWT")]),s._v("认证机制")])])]),s._v(" "),t("h3",{attrs:{id:"session-认证机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session-认证机制"}},[s._v("#")]),s._v(" "),t("code",[s._v("Session")]),s._v(" 认证机制")]),s._v(" "),t("h4",{attrs:{id:"_1、http-协议的无状态性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、http-协议的无状态性"}},[s._v("#")]),s._v(" 1、HTTP 协议的无状态性")]),s._v(" "),t("blockquote",[t("p",[s._v("了解"),t("code",[s._v("HTTP")]),s._v("协议的无状态性是进一步学习"),t("code",[s._v("Session")]),s._v("认证机制的必要前提。")]),s._v(" "),t("p",[t("code",[s._v("HTTP")]),s._v("协议的无状态性，指的是客户端的每次"),t("code",[s._v("HTTP")]),s._v("请求都是独立的，连续多个请求之间没有直接的关系，服务器不会主动保留每次"),t("code",[s._v("HTTP")]),s._v("请求的状态。")]),s._v(" "),t("p",[s._v("如何突破"),t("code",[s._v("HTTP")]),s._v("无状态的限制")]),s._v(" "),t("p",[s._v("在Web开发中的专业术语叫做"),t("code",[s._v("Cookie")]),s._v("。")])]),s._v(" "),t("h4",{attrs:{id:"_2、什么是cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、什么是cookie"}},[s._v("#")]),s._v(" 2、什么是Cookie")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Cookie")]),s._v("是存储在用户浏览器中的一段不超过"),t("code",[s._v("4KB")]),s._v("的字符串。它由一个名称("),t("code",[s._v("Name")]),s._v(")、一个值("),t("code",[s._v("Value")]),s._v(")和其它几个用于控制"),t("code",[s._v("Cookie")]),s._v("有效期、安全性、使用范国的可选属性组成。")]),s._v(" "),t("p",[s._v("不同域名下的"),t("code",[s._v("Cookie")]),s._v("各自独立，每当客户端发起请求时，会自动把当前域名下所有未过期的"),t("code",[s._v("Cookie")]),s._v("一同发送到服务器。")])]),s._v(" "),t("p",[s._v("Cookie的计大特性：")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("① 自动发送")]),s._v(" "),t("li",[s._v("② 域名独立")]),s._v(" "),t("li",[s._v("③ 过期限制")]),s._v(" "),t("li",[s._v("④ 4k限制")])])]),s._v(" "),t("h4",{attrs:{id:"_3、cookie在身份认证中的作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、cookie在身份认证中的作用"}},[s._v("#")]),s._v(" 3、Cookie在身份认证中的作用")]),s._v(" "),t("blockquote",[t("p",[s._v("客户端第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的"),t("code",[s._v("Cookie")]),s._v(",客户端会自动将"),t("code",[s._v("Cookie")]),s._v("保存在浏览器中。")]),s._v(" "),t("p",[s._v("随后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证相关的"),t("code",[s._v("Cookie")]),s._v(",通过请求头的形式发送给服务器，服务器即可验明客户端的身份。")])]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1668330715994-a2fc9767-705b-457d-9c41-4147dd563ab3.png#averageHue=%23d1dbcc&clientId=u2ecfedc6-8d84-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=200&id=uafeb7980&margin=%5Bobject%20Object%5D&name=image.png&originHeight=275&originWidth=1104&originalType=binary&ratio=1&rotation=0&showTitle=false&size=140676&status=done&style=none&taskId=uc63f0f84-789d-4bc5-8cf3-1f28ee63431&title=&width=802.9090909090909",referrerpolicy:"no-referrer"}}),s._v(" "),t("h4",{attrs:{id:"_4、cookie-不具有安全性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、cookie-不具有安全性"}},[s._v("#")]),s._v(" 4、Cookie 不具有安全性")]),s._v(" "),t("blockquote",[t("p",[s._v("由于"),t("code",[s._v("Cookie")]),s._v("是存储在浏览器中的，而且浏览器也提供了读写"),t("code",[s._v("Cookie")]),s._v("的"),t("code",[s._v("API")]),s._v("叫，因此"),t("code",[s._v("Cookie")]),s._v("很容易被伪造，不具有安全性。因此不建议服务器将重要的隐私数据，通过"),t("code",[s._v("Cookie")]),s._v("的形式发送给浏览器。\n注意：干万不要使用"),t("code",[s._v("Cookie")]),s._v("存储重要且隐私的数据！比如用户的身份信息、密码等。")])]),s._v(" "),t("h4",{attrs:{id:"_5、提高身份认证的安全性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、提高身份认证的安全性"}},[s._v("#")]),s._v(" 5、提高身份认证的安全性")]),s._v(" "),t("blockquote",[t("p",[s._v("为了防止客户伪造会员卡，收银员在拿到客户出示的会员卡之后，可以在收银机上进行刷卡认证。只有收银机确认存在的会员卡，才能被正常使用。\n这种“会员卡+刷卡认证”的设计理念，就是Session认证机制的精髓。")])]),s._v(" "),t("h4",{attrs:{id:"_6、session的工作原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、session的工作原理"}},[s._v("#")]),s._v(" 6、Session的工作原理")]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1668331691374-6d8e3e68-6a0c-448b-9c59-5af4ecacffd9.png#averageHue=%23f6f9f6&clientId=u2ecfedc6-8d84-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=337&id=u5456e5da&margin=%5Bobject%20Object%5D&name=image.png&originHeight=464&originWidth=938&originalType=binary&ratio=1&rotation=0&showTitle=false&size=186319&status=done&style=none&taskId=u6669142b-8398-4d29-a44e-f4ef3f9b492&title=&width=682.1818181818181",referrerpolicy:"no-referrer"}}),s._v(" "),t("h3",{attrs:{id:"在-express-中使用-session-认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-express-中使用-session-认证"}},[s._v("#")]),s._v(" 在 Express 中使用 Session 认证")]),s._v(" "),t("h4",{attrs:{id:"_1、安装-express-session-中间件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装-express-session-中间件"}},[s._v("#")]),s._v(" 1、安装 express-session 中间件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" express-session\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_2、配置-express-session-中间件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置-express-session-中间件"}},[s._v("#")]),s._v(" 2、配置 express-session 中间件")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("express-session")]),s._v("中间件安装成功后，需要通过"),t("code",[s._v("app.use()")]),s._v("来注册"),t("code",[s._v("session")]),s._v("中间件  ，示例代码如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 导入session中间件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" session "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express-session'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2.配置Session中问件")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("session")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("secret")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'keyboard cat'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//secret属性的值可以为任意字符串")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("resave")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 固定写法")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("saveUninitialized")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//固定写法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"_3、向-session-中存数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、向-session-中存数据"}},[s._v("#")]),s._v(" 3、向 session 中存数据")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/api/login'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//断用户提交的录信息员香正确")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'000000'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'登录失败'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：只有成功配置了express-session这个中间件之后，才能够通过req点出来session这个属性")]),s._v("\n\n\treq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("se5sion"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("userInfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将用户的信息，存储倒Session中")]),s._v("\n\treq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isLogin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将用户的登录状态，存到Session中")]),s._v("\n\tres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'登录成功'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h4",{attrs:{id:"_4、从-session-中的数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、从-session-中的数据"}},[s._v("#")]),s._v(" 4、从 session 中的数据")]),s._v(" "),t("blockquote",[t("p",[s._v("可以直接从"),t("code",[s._v("req.session")]),s._v("对象上获取之前存储的数据，示例代码如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取用户姓名的接口")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/api/username'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断用户是否登录")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("islogin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fail'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\tres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'success'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"_5、清空-session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、清空-session"}},[s._v("#")]),s._v(" 5、清空 session")]),s._v(" "),t("blockquote",[t("p",[s._v("调用"),t("code",[s._v("req.session.destroy()")]),s._v("函数，即可清空服务器保存的"),t("code",[s._v("session")]),s._v("信息。")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//退出登录的接口")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/api/logout'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清空当前客户端对应的session信息")]),s._v("\n\treq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'退出登录成功'")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"jwt-认证机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jwt-认证机制"}},[s._v("#")]),s._v(" JWT 认证机制")]),s._v(" "),t("h4",{attrs:{id:"_1、了解-session-认证的局限性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、了解-session-认证的局限性"}},[s._v("#")]),s._v(" 1、了解 Session 认证的局限性")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Session")]),s._v("认证机制需要配合"),t("code",[s._v("Cookie")]),s._v("才能实现。由于"),t("code",[s._v("Cookie")]),s._v("默认不支持跨域访问，所以，当涉及到前端跨域请求后端接口的时候，需要做很多额外的配置，才能实现跨域"),t("code",[s._v("Session")]),s._v("认证")]),s._v(" "),t("ul",[t("li",[s._v("当前端请求后端接口不存在跨域问题的时候，推荐使用"),t("code",[s._v("Session")]),s._v("身份认证机制。")]),s._v(" "),t("li",[s._v("当前端需要跨域请求后端接口的时候，不推荐使用"),t("code",[s._v("Session")]),s._v("身份认证机制，推荐使用"),t("code",[s._v("JWT")]),s._v("认证机制。")])])]),s._v(" "),t("h4",{attrs:{id:"_2、-什么是-jwt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、-什么是-jwt"}},[s._v("#")]),s._v(" 2、 什么是 "),t("code",[s._v("JWT")])]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("JWT")]),s._v("(英文全称：JSON Web Token)是目前最流行的跨域认证解决方案。")])]),s._v(" "),t("h4",{attrs:{id:"_3、jwt的中作原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、jwt的中作原理"}},[s._v("#")]),s._v(" 3、JWT的中作原理")]),s._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/28469598/1668334178494-86dd3636-e56d-4ed6-ad91-a7cd816d4e39.png#averageHue=%23f6f4f4&clientId=u2ecfedc6-8d84-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=303&id=u2ebbd638&margin=%5Bobject%20Object%5D&name=image.png&originHeight=416&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=132902&status=done&style=none&taskId=uf45e0146-3cda-4810-a9d2-ebb34c7d468&title=&width=581.8181818181819",referrerpolicy:"no-referrer"}}),s._v("\n> 总结：用户的信息通过`Token`字符串的形式，保存在客户端浏览器中。服务器通过还原`Token`字符串的形式来认证用户的身份。\n"),t("h4",{attrs:{id:"_4、jwt-的组成部分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、jwt-的组成部分"}},[s._v("#")]),s._v(" 4、JWT 的组成部分")]),s._v(" "),t("blockquote",[t("p",[s._v("JWT通常由三部分组成，分别是"),t("code",[s._v("Header")]),s._v("(头部)、"),t("code",[s._v("Payload")]),s._v("(有效荷载)、"),t("code",[s._v("Signature")]),s._v("(签名)。\n三者之间使用英文的“"),t("code",[s._v(".")]),s._v("”分隔，格式如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("Header"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Payload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Signature\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 示例")]),s._v("\neyJhbGcioiJIUzI1NiIsInR5cCI6IkpXVCJ9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eyJpZCI6MSwidxNIcm5hbwuioiJhZG1pbiIsInBhc3N3b3JkIjoiliwibmlja25\nhbwui0iLms6xlt7T1t7QiLCJlbWFpbCI6Im5pYmFiYUBpdGNhc3QuY241LCJ1c2vyX3BpYyI6IiIsImlhdCI6MTU30DAZNjY4Miw\nizXhwIjoxNTc4MDcyNjgyfQ"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Wq7GqCxJPK"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("EA8LNrtMG0411KdZ3359KBL3XeuBxuI\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("blockquote",[t("ul",[t("li",[t("code",[s._v("Payload")]),s._v("部分才是真正的用户信息，它是用户信息经过加密之后生成的字符串。")]),s._v(" "),t("li",[t("code",[s._v("Header")]),s._v("和"),t("code",[s._v("Signature")]),s._v("是安全性相关的部分，只是为了保证"),t("code",[s._v("Token")]),s._v("的安全性。")])])]),s._v(" "),t("h4",{attrs:{id:"_5、-jwt-的使用方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、-jwt-的使用方式"}},[s._v("#")]),s._v(" 5、 JWT 的使用方式")]),s._v(" "),t("blockquote",[t("p",[s._v("客户端收到服务器返回的"),t("code",[s._v("JWT")]),s._v("之后，通常会将它储存在"),t("code",[s._v("localStorage")]),s._v("或"),t("code",[s._v("sessionStorage")]),s._v("中。\n此后，客户端每次与服务器通信，都要带上这个"),t("code",[s._v("JWT")]),s._v("的字符串，从而进行身份认证。推荐的做法是把"),t("code",[s._v("JWT")]),s._v("放在"),t("code",[s._v("HTTP")]),s._v("请求头的"),t("code",[s._v("Authorization")]),s._v("字段中，格式如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("Authorization")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Beares "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"在express-中使用-jwt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在express-中使用-jwt"}},[s._v("#")]),s._v(" 在Express 中使用 JWT")]),s._v(" "),t("h4",{attrs:{id:"_1、安装-jwt-相关的包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装-jwt-相关的包"}},[s._v("#")]),s._v(" 1、安装 JWT 相关的包")]),s._v(" "),t("blockquote",[t("p",[s._v("运行如下命令，安装如下两个WT相关的包：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" jsonwebtoken express-jwt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("ul",[t("li",[t("code",[s._v("jsonwebtoken")]),s._v("用于生成"),t("code",[s._v("JWT")]),s._v("字符串")]),s._v(" "),t("li",[t("code",[s._v("express-jwt")]),s._v("用于将"),t("code",[s._v("JWT")]),s._v("字符串解析还原成"),t("code",[s._v("JSON")]),s._v("对象")])])]),s._v(" "),t("h4",{attrs:{id:"_2、导入jwt相关的包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、导入jwt相关的包"}},[s._v("#")]),s._v(" 2、导入JWT相关的包")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" jwt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("requery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jsonwebtoken'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" expressJWT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("requery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express-jwt'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"_3、定义-secret-密钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、定义-secret-密钥"}},[s._v("#")]),s._v(" 3、定义 secret 密钥")]),s._v(" "),t("blockquote",[t("p",[s._v("为了保证WT字符串的安全性，防止WT字符串在网络传输过程中被别人破解，我们需要专门定义一个用于加密和解密的"),t("code",[s._v("secret")]),s._v("密钥：")]),s._v(" "),t("ul",[t("li",[s._v("① 当生成"),t("code",[s._v("JWT")]),s._v("字符串的时候，需要使用"),t("code",[s._v("secret")]),s._v("密钥对用户的信息进行加密，最终得到助加密好的"),t("code",[s._v("JWT")]),s._v("字符串")]),s._v(" "),t("li",[s._v("② 当把"),t("code",[s._v("JWT")]),s._v("字符串解析还原成"),t("code",[s._v("JSON")]),s._v("对象的时候，需要使用"),t("code",[s._v("secret")]),s._v("密钥进行解密")])])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" secretKey "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'自定义的字符串'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_4、在登录成功后生成jwt字符串"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、在登录成功后生成jwt字符串"}},[s._v("#")]),s._v(" 4、在登录成功后生成JWT字符串")]),s._v(" "),t("blockquote",[t("p",[s._v("调用"),t("code",[s._v("jsonwebtoken")]),s._v("包提供的"),t("code",[s._v("sign()")]),s._v("方法，将用户的信息加密成"),t("code",[s._v("JWT")]),s._v("字符串，响应给客户端：\nsign()有三个参数\n参数1：用户的信息\n参数2：机密的密钥\n参数3：配置对象，可以配置当前 token 的有效期")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 登录接口")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/api/login'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户登录成功之后，生成JWT字符串，通过 tokn 属性响应给客户端")]),s._v("\n\tres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200.")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'登录成功!'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//调用jwt.sign() 生成 JWT 字符审，三个参数分别是：用户信息对象、加密密钥、配置对象")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("token")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" jwt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sign")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" userinfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" secretKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("expiresIn")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'30s'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"_5、将jwt字符串还原为json对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、将jwt字符串还原为json对象"}},[s._v("#")]),s._v(" 5、将"),t("code",[s._v("JWT")]),s._v("字符串还原为"),t("code",[s._v("JSON")]),s._v("对象")]),s._v(" "),t("blockquote",[t("p",[s._v("客户端海次在访问那些有权限接口的时候，都需要主动通过请求头中的"),t("code",[s._v("Authorization")]),s._v("字段，将"),t("code",[s._v("Token")]),s._v("字符串发送到服务器进行身份认证。\n此时，服务器可以通过"),t("code",[s._v("express-jwt")]),s._v("这个中间件，自动将客户端发送过来的"),t("code",[s._v("Token")]),s._v("解析还原成"),t("code",[s._v("JSON")]),s._v("对象：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用app.use()来注册中间件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// expressJWT({ secret:secretKey })就是用来解析Token的中间件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .unless({ path:[/^\\/api\\//] })用来指定哪些接口不需要访问权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：只要配置成功了express-jwt这个中间件，就可以把解析出来的用户信息，挂载到req.user属性上")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expressJWT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("secret")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" secretKey "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unless")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("^\\/api\\/")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_6、使用-req-user-获取用户信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、使用-req-user-获取用户信息"}},[s._v("#")]),s._v(" 6、使用 req.user 获取用户信息")]),s._v(" "),t("blockquote",[t("p",[s._v("当"),t("code",[s._v("express-jwt")]),s._v("这个中间件配置成功之后，即可在那些有权限的接口中，使用"),t("code",[s._v("req.user")]),s._v("对像，来访问从"),t("code",[s._v("JWT")]),s._v("字符串中解析出来的用户信息了，示例代码如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这是一个有权限的API接口")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/admin/getinfo'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 当配置成功expressJWT后会有req.user这个对象")]),s._v("\n\tconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'获取用户信息成功！'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"_7、捕获解析jwt失败后产生的错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、捕获解析jwt失败后产生的错误"}},[s._v("#")]),s._v(" 7、捕获解析JWT失败后产生的错误")]),s._v(" "),t("blockquote",[t("p",[s._v("当使用"),t("code",[s._v("express-jwt")]),s._v("解析"),t("code",[s._v("Token")]),s._v("字符串时，如果客户端发送过来的"),t("code",[s._v("Token")]),s._v("字符串过期或不合法，会产生一个解析失败的错误，影响项目的正常运行。我们可以通过"),t("code",[s._v("Express")]),s._v("的错误中间件，捕获这个错误并进行相关的处理，示例代码如下：")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//token解析失败导致的错误")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'UnauthorizedError'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("401")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'无效的token'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//其它原因导致的错误")]),s._v("\n\tres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'未知错误'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);